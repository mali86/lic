/*! LIC.Admin 1.0.0 12-10-2018 */

angular.module("app",["angular-jwt","ngMaterial","ui.router","md.data.table","LocalStorageModule","ngTagsInput","angularFileUpload","mdPickers","lic.templates"]).config(["$urlRouterProvider","jwtInterceptorProvider","$httpProvider","$locationProvider","jwtOptionsProvider","localStorageServiceProvider","$mdThemingProvider","$compileProvider",function(t,e,n,a,o,i,r,d){r.definePalette("customBlue",{50:"155487",100:"155487",200:"155487",300:"155487",400:"155487",500:"155487",600:"155487",700:"155487",800:"155487",900:"155487",A100:"11527c",A200:"155487",A400:"155487",A700:"155487",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:"dark"}),r.theme("default").primaryPalette("customBlue").accentPalette("orange"),t.otherwise("/home"),d.preAssignBindingsEnabled(!0),i.setPrefix("lic.admin"),e.tokenGetter=["localStorageService",function(t){return t.get("token")}],o.config({tokenGetter:["localStorageService",function(t){return t.get("token")}],authPrefix:"",unauthenticatedRedirector:["$state",function(t){t.go("login")}],whiteListedDomains:["localhost","lifeisacoupon.org","18.221.164.53","18.223.38.238","api.lifeisacoupon.info","api.lifeisacoupon.com","dev.lifeisacoupon.info"]}),n.interceptors.push("jwtInterceptor"),n.interceptors.push(["$injector","$q","localStorageService","$rootScope",function(o,i,r,d){return{responseError:function(t){var e=o.get("config"),n=o.get("$http"),a=o.get("$state");return 401!=t.status&&403!=t.status||!t.config.url.startsWith(e.baseAddress)||-1==t.data.message.toLowerCase().indexOf("unauthenticated")||(r.remove("token"),delete n.defaults.headers.common.Authorization,d.session={},a.go("login")),i.reject(t)}}}]),a.html5Mode(!1),firebase.initializeApp(configFireBase)}]).run(["$rootScope","$state","jwtHelper","$mdToast","localStorageService","authManager","userService",function(r,d,s,n,l,t,e){r.$on("$stateChangeStart",function(t,e,n,a,o,i){r.state=e,r.previousState=a,r.session=l.get("token")?s.decodeToken(l.get("token")):{},e.requiresLogin?l.get("token")&&!s.isTokenExpired(l.get("token"))||(t.preventDefault(),"register"==e.name?d.go("register"):"forgot-password"==e.name?d.go("forgot-password"):"change-password"==e.name?d.go("change-password"):d.go("login")):l.get("token")&&!s.isTokenExpired(l.get("token"))&&"login"==e.name&&(t.preventDefault(),d.go("layout.home")),console.log(e),"layout.home"==e.name?r.isBackActive=!1:"layout.merchant"==e.name?r.isBackActive=!1:"layout.areas"==e.name?r.isBackActive=!1:"layout.push-notification"==e.name?r.isBackActive=!1:"layout.settings"==e.name?r.isBackActive=!1:"layout.users"==e.name?r.isBackActive=!1:r.isBackActive=!0,"layout.coupon"==e.name&&console.log(r.previousState)}),r.$on("toast",function(t,e){e&&e.message&&n.show(n.simple().content(e.message).hideDelay(e.duration?e.duration:2e3))})}]),angular.module("app").constant("config",config),angular.module("app").constant("configFireBase",configFireBase),angular.module("app").directive("ngThumb",["$window",function(t){var d=!(!t.FileReader||!t.CanvasRenderingContext2D);return{restrict:"A",template:"<canvas/>",scope:{file:"=",width:"=",height:"="},link:function(n,t,e){if(d){n.$watch("file",function(t,e){o.onload=i,o.readAsDataURL(n.file)});var a=t.find("canvas"),o=new FileReader}function i(t){var e=new Image;e.onload=r,e.src=t.target.result}function r(){var t=n.width||this.width/this.height*n.height,e=n.height||this.height/this.width*n.width;a.attr({width:t,height:e,class:"img-rounded img-responsive"}),a[0].getContext("2d").drawImage(this,0,0,t,e)}}}}]),angular.module("app").filter("correctedDate",function(){return function(t){if(t)return moment.utc(t).local().format("MM/DD/YYYY HH:mm")}}),angular.module("app").config(["$stateProvider",function(t){t.state("layout.areas-edit",{url:"/areas/areas-edit",controller:"AreaAddEditController",templateUrl:"/app/sections/areas/addEditAreas/areaAddEdit.html",requiresLogin:!0})}]).controller("AreaAddEditController",["$scope","$mdDialog","areaService","stateService",function(e,n,a,o){e.area=a.getAreaData(),e.area&&e.area.id&&(e.selectedState={id:e.area.state_id,name:e.area.state_name},e.searchStateText=e.area.state_name),e.loadStates=function(t){var e={limit:10,page:1};return t&&(e.search=t),o.get(e).then(function(t){return t.states},function(t){return $rootScope.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."}),!1})},e.save=function(){e.loading=!0;var t=angular.copy(e.area);t.state_id=e.selectedState.id,(t.id?a.update(t):a.add(t)).then(function(t){n.hide(t)},function(t){$rootScope.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){e.loading=!1})},e.cancel=function(){n.cancel()}}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout.areas",{url:"/areas",controller:"AreaController",templateUrl:"/app/sections/areas/area.html",requiresLogin:!0})}]).controller("AreaController",["$rootScope","$scope","$state","$mdDialog","areaService","$timeout",function(a,o,e,i,r,t){var n;function d(){o.loading=!0,r.get(o.params).then(function(t){o.areas=t.areas,o.total=t.total},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){o.loading=!1})}o.params={page:1,limit:10},d(),o.areaModal=function(t,e){i.show({controller:"AreaModalController",templateUrl:"/app/sections/areas/modals/areaModal.html",parent:angular.element(document.body),targetEvent:t,size:"lg",clickOutsideToClose:!1,locals:{area:angular.copy(e)}}).then(function(t){o.params.page=1,d()},function(t){})},o.openAreaAdd=function(){r.setAreaData(null),e.go("layout.areas-edit")},o.openAreaEdit=function(t){r.setAreaData(t),e.go("layout.areas-edit")},o.removeModal=function(t,e){var n=i.confirm().title("Delete").textContent("Are you sure?").ariaLabel("Delete").targetEvent(t).ok("Yes").cancel("No");i.show(n).then(function(){e.loading=!0,r.remove(e).then(function(t){o.params.page=1,d()},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error"})}).finally(function(){e.loading=!1})},function(t){})},o.search=function(){o.params.page=1,n&&t.cancel(n),n=t(function(){d()},250)},o.onPaginate=function(){d()},o.sortAreas=function(){d()}}]),angular.module("app").controller("AreaModalController",["$scope","$mdDialog","areaService","area","stateService",function(e,n,a,t,o){e.area=t,e.area&&e.area.id&&(e.selectedState={id:e.area.state_id,name:e.area.state_name},e.searchStateText=e.area.state_name),e.loadStates=function(t){var e={limit:10,page:1};return t&&(e.search=t),o.get(e).then(function(t){return t.states},function(t){return $rootScope.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."}),!1})},e.save=function(){e.loading=!0;var t=angular.copy(e.area);t.state_id=e.selectedState.id,(t.id?a.update(t):a.add(t)).then(function(t){n.hide(t)},function(t){$rootScope.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){e.loading=!1})},e.cancel=function(){n.cancel()}}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout.categories-edit",{url:"/areas/categories-edit",controller:"CategoriesAddEditController",templateUrl:"/app/sections/categories/categoriesAddEdit/categoryAddEdit.html",requiresLogin:!0})}]).controller("CategoriesAddEditController",["$rootScope","$scope","$mdDialog","localStorageService","categoryService","FileUploader","config",function(e,n,a,t,o,i,r){n.category=o.getCategoryData()?o.getCategoryData():{},n.uploader=new i({url:r.baseAddress+"categories/"+n.category.id+"/upload-file",headers:{Authorization:t.get("token")},alias:"logo"}),n.uploader.filters.push({name:"imageFilter",fn:function(t,e){var n="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|".indexOf(n)}}),n.uploader.onBeforeUploadItem=function(t){t.url=r.baseAddress+"categories/"+n.category.id+"/upload-file",t.formData.push({id:n.category.id})},n.uploader.onCompleteAll=function(){n.loading=!1,e.$emit("toast",{message:"Successfully saved!",type:"success"}),a.hide(n.category)},n.uploader.onAfterAddingFile=function(t){n.imagePreparedForUpload=t},n.save=function(){n.loading=!0,(n.category.id?o.update(n.category):o.add(n.category)).then(function(t){n.category.id=t.id,n.imagePreparedForUpload?n.uploader.uploadItem(n.imagePreparedForUpload):(e.$emit("toast",{message:"Successfully saved!",type:"success"}),a.hide(t))},function(t){e.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error"})}).finally(function(){n.loading=!1})},n.removeLogo=function(){o.removeFile(n.category.id).then(function(){n.imagePreparedForUpload=void 0,n.category.logo=void 0},function(t){e.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})})},n.cancel=function(){a.cancel()}}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout.categories",{url:"/categories",controller:"CategoryController",templateUrl:"/app/sections/categories/categories.html",requiresLogin:!0})}]).controller("CategoryController",["$rootScope","$scope","$state","$mdDialog","categoryService","$timeout",function(a,o,e,i,d,t){var n;function s(){o.loading=!0,d.get(o.params).then(function(t){o.categories=t.categories,o.total=t.total},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error"})}).finally(function(){o.loading=!1})}o.params={page:1,limit:10},s(),o.convertHex=function(t,e){return t=t.replace("#",""),r=parseInt(t.substring(0,2),16),g=parseInt(t.substring(2,4),16),b=parseInt(t.substring(4,6),16),result="rbga("+r+","+g+","+b+","+e/100+")"},o.openCategoryAdd=function(){d.setCategoryData(null),e.go("layout.categories-edit")},o.openCategoryEdit=function(t){d.setCategoryData(t),e.go("layout.categories-edit")},o.removeModal=function(t,e){var n=i.confirm().title("Delete").textContent("Are you sure?").ariaLabel("Delete").targetEvent(t).ok("Yes").cancel("No");i.show(n).then(function(){e.loading=!0,d.remove(e).then(function(t){o.params.page=1,s()},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error"})}).finally(function(){e.loading=!1})},function(t){})},o.search=function(){o.params.page=1,n&&t.cancel(n),n=t(function(){s()},250)},o.onPaginate=function(){s()},o.sortCategories=function(){s()}}]),angular.module("app").controller("CategoryModalController",["$rootScope","$scope","$mdDialog","localStorageService","categoryService","category","FileUploader","config",function(e,n,a,t,o,i,r,d){n.category=i||{},n.uploader=new r({url:d.baseAddress+"categories/"+n.category.id+"/upload-file",headers:{Authorization:t.get("token")},alias:"logo"}),n.uploader.filters.push({name:"imageFilter",fn:function(t,e){var n="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|".indexOf(n)}}),n.uploader.onBeforeUploadItem=function(t){t.url=d.baseAddress+"categories/"+n.category.id+"/upload-file",t.formData.push({id:n.category.id})},n.uploader.onCompleteAll=function(){n.loading=!1,e.$emit("toast",{message:"Successfully saved!",type:"success"}),a.hide(n.category)},n.uploader.onAfterAddingFile=function(t){n.imagePreparedForUpload=t},n.save=function(){n.loading=!0,(n.category.id?o.update(n.category):o.add(n.category)).then(function(t){n.category.id=t.id,n.imagePreparedForUpload?n.uploader.uploadItem(n.imagePreparedForUpload):(e.$emit("toast",{message:"Successfully saved!",type:"success"}),a.hide(t))},function(t){e.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error"})}).finally(function(){n.loading=!1})},n.removeLogo=function(){o.removeFile(n.category.id).then(function(){n.imagePreparedForUpload=void 0,n.category.logo=void 0},function(t){e.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})})},n.cancel=function(){a.cancel()}}]),angular.module("app").config(["$stateProvider",function(t){t.state("change-password",{controller:"ChangePasswordController",url:"/change-password?token&data",templateUrl:"/app/sections/change-password/change-password.html",requiresLogin:!1})}]).controller("ChangePasswordController",["$rootScope","$scope","userService","$state","$stateParams",function(e,n,t,a,o){n.data={password:"",password_confirmation:""},n.changePassword=function(){n.loading=!0,t.passwordReset({token:o.token,data:o.data,password:n.data.password,password_confirmation:n.data.password_confirmation}).then(function(t){t&&t.id&&(n.success=!0)},function(t){e.$broadcast("toast",{message:t.data.message?t.data.message:"Server error."}),a.go("login")}).finally(function(){n.loading=!1})}}]),angular.module("app").config(["$stateProvider",function(t){t.state("confirm-email",{controller:"ConfirmEmailController",url:"/confirm-email?token&data",templateUrl:"/app/sections/confirmEmail/confirmEmail.html",requiresLogin:!1})}]).controller("ConfirmEmailController",["$rootScope","$scope","userService","$state","$stateParams",function(e,n,t,a,o){n.loading=!0,t.confirmEmail({token:o.token,data:o.data}).then(function(t){t&&t.id&&(n.success=!0)},function(t){e.$broadcast("toast",{message:t.data.message?t.data.message:"Server error."}),a.go("login")}).finally(function(){n.loading=!1})}]),angular.module("app").config(["$stateProvider",function(t){t.state("forgot-password",{url:"/forgot-password",controller:"ForgotPasswordController",templateUrl:"/app/sections/forgot-password/forgot-password.html"})}]).controller("ForgotPasswordController",["$scope","$state","userService","$rootScope",function(e,t,n,a){e.data={email:""},e.forgotPassword=function(){e.loading=!0,n.forgotPassword({email:e.data.email}).then(function(t){e.email="",a.$broadcast("toast",{message:"Email successfully sent, please check you email."})},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error"})}).finally(function(){e.loading=!1})}}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout.home",{url:"/home",controller:"HomeController",templateUrl:"/app/sections/home/home.html",requiresLogin:!0})}]).controller("HomeController",["$rootScope","$scope","$state","userService",function(e,n,t,a){n.loading=!0,a.getHomeInformation().then(function(t){n.totals=t,n.loading=!1},function(t){e.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){n.loading=!1})}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout",{controller:"LayoutController",templateUrl:"/app/sections/layout/layout.html",requiresLogin:!0})}]).controller("LayoutController",["$rootScope","$scope","$http","$state","$mdSidenav","couponService","userService","localStorageService","$mdDialog",function(t,e,n,a,o,i,r,d,s){e.user=t.session,e.isPixieOpen=function(){return i.isOpen()},e.close=function(){o("left").close()},e.toggle=function(){o("left").toggle()},e.openMenu=function(t,e){t(e)},e.openSettings=function(){},e.onBack=function(){console.log(t.toState),"layout.coupons"==t.name?a.go("layout.merchant"):a.go(t.previousState.name)},e.profileModal=function(t){s.show({controller:"UserModalController",templateUrl:"/app/sections/users/modals/userModal.html",parent:angular.element(document.body),targetEvent:t,size:"lg",clickOutsideToClose:!1,resolve:{user:["userService",function(t){return t.me()}]},locals:{profileEdit:!0}}).then(function(t){e.user.first_name=t.first_name,e.user.last_name=t.last_name},function(t){})},e.logout=function(){d.remove("token"),d.remove("user"),d.remove("refresh_token"),delete n.defaults.headers.common.Authorization,t.session={},a.go("login")}}]),angular.module("app").config(["$stateProvider",function(t){t.state("login",{url:"/login",controller:"LoginController",templateUrl:"/app/sections/login/login.html"})}]).controller("LoginController",["$scope","$state","userService","localStorageService","$rootScope",function(t,e,n,a,o){t.user={},t.login=function(){t.loading=!0,n.login(t.user).then(function(t){a.set("token",t.token),e.go("layout.home")},function(t){o.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Invalid email/password."})}).finally(function(){t.loading=!1})}}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout.merchants-edit",{url:"/merchants/merchants-edit",controller:"MerchantAddEditController",templateUrl:"/app/sections/merchant/addEditMerchant/merchantAddEdit.html",requiresLogin:!0})}]).controller("MerchantAddEditController",["$rootScope","$scope","$mdDialog","merchantService","localStorageService","areaService","shoppingCenterService","categoryService","FileUploader","$timeout",function(n,a,e,o,t,i,r,d,s,l){var c;a.merchant=o.getMerchantData()?o.getMerchantData():{},a.merchant&&a.merchant.id&&(a.merchant.area_id&&(a.searchAreaText=a.merchant.area_name),a.merchant.shopping_center_id&&(a.searchTextShoppingCenter=a.merchant.shopping_center_name)),console.log("test",a.merchant),a.isEmpty=function(t){for(var e in console.log("obj",t),t)if(t.hasOwnProperty(e))return!1;return!0},a.save=function(){a.loading=!0;var t=angular.copy(a.merchant);t.user_id=n.session.user_id,t.categories=_.map(t.categories,function(t){return t.id}),(a.merchant.id?o.update(t):o.add(t)).then(function(t){a.merchant=t,a.imagePreparedForUpload?a.uploader.uploadItem(a.imagePreparedForUpload):(n.$emit("toast",{message:"Successfully saved!",type:"success"}),e.hide(a.merchant))},function(t){n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){a.imagePreparedForUpload||(a.loading=!1)})},a.loadArea=function(t){var e={limit:10,page:1};return t&&(e.search=t),i.get(e).then(function(t){return t.areas},function(t){return n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."}),!1})},a.selectArea=function(t){t?a.merchant.area_id=t.id:(a.merchant.area_id=void 0,a.searchAreaText="",a.merchant.shopping_center_id=void 0,a.searchTextShoppingCenter="",a.selectedShoppingCenter=void 0)},a.loadShoppingCenters=function(t){var e={limit:10,page:1};return t&&(e.search=t),a.merchant.area_id&&(e.area=a.merchant.area_id),r.get(e).then(function(t){return t.shopping_centers},function(t){return n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."}),!1})},a.selectShoppingCenter=function(t){t?(a.merchant.shopping_center_id=t.id,t.address&&(a.merchant.address=t.address),t.city&&(a.merchant.city=t.city),t.zip&&(a.merchant.zip=t.zip),a.merchant.area_id||(a.merchant.area_id=t.area_id,a.searchAreaText=t.area_name,a.selectedArea={id:t.area_id,name:t.area_name})):(a.merchant.shopping_center_id=void 0,a.searchTextShoppingCenter="")},a.loadCategories=function(t){return a.categoryLoading=!0,d.get({search:t,limit:10,page:1}).then(function(t){return a.categoryLoading=!1,t.categories},function(t){n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})})},a.uploader=new s({url:config.baseAddress+"merchants/"+a.merchant.id+"/upload-file",headers:{Authorization:t.get("token")},alias:"logo"}),a.uploader.filters.push({name:"imageFilter",fn:function(t,e){var n="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|".indexOf(n)}}),a.uploader.onBeforeUploadItem=function(t){t.url=config.baseAddress+"merchants/"+a.merchant.id+"/upload-file",t.formData.push({id:a.merchant.id})},a.uploader.onCompleteAll=function(){a.loading=!1,n.$emit("toast",{message:"Successfully saved!",type:"success"}),e.hide(a.merchant)},a.uploader.onAfterAddingFile=function(t){a.imagePreparedForUpload=t},a.removeLogo=function(){o.removeFile(a.merchant.id).then(function(){a.imagePreparedForUpload=void 0,a.merchant.logo=void 0},function(t){n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})})},a.geoLocationByZip=function(t){c&&l.cancel(c),c=l(function(){a.loadingByZip=!0,o.geoLocationByZip(t).then(function(t){a.merchant.address=t.address,a.merchant.city=t.city,a.merchant.lat=t.lat,a.merchant.lon=t.lon},function(t){n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){a.loadingByZip=!1})},250)},a.cancel=function(){e.cancel()}}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout.coupons",{url:"/merchants/:merchantId/coupons?fmm",controller:"MerchantCouponController",templateUrl:"/app/sections/merchant/coupon/coupon.html",requiresLogin:!0})}]).controller("MerchantCouponController",["$rootScope","$scope","$state","$mdDialog","couponService","merchantService","$stateParams",function(a,o,n,i,r,t,d){var s=["jpg","jpeg","png","bpm"];function l(){o.loading=!0,t.getCouponsForMerchant(d.merchantId,o.params).then(function(t){o.coupons=t.coupons,_.each(o.coupons,function(t){var e=_.find(t.files,function(t){var e=t.url.substr(t.url.lastIndexOf(".")+1);return-1!=s.indexOf(e)});e&&(t.image=e)}),o.total=t.total},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error"})}).finally(function(){o.loading=!1})}o.params={page:1,limit:10},t.getById(d.merchantId).then(function(t){o.merchant=t},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error"})}),l(),o.goBack=function(){d.fmm?n.go("layout.shopping-centers"):n.go("layout.merchant")},o.openPixieEditor=function(t,e){r.setIsOpen(!1),n.go("layout.pixie",{merchantId:d.merchantId})},o.openCouponModal=function(t,e){i.show({controller:"CouponModalController",templateUrl:"/app/sections/merchant/coupon/modals/couponModal.html",parent:angular.element(document.body),targetEvent:t,size:"lg",clickOutsideToClose:!1,locals:{coupon:angular.copy(e),merchant:angular.copy(o.merchant)}}).then(function(t){l()},function(t){})},o.removeModal=function(t,e){var n=i.confirm().title("Delete").textContent("Are you sure?").ariaLabel("Delete").targetEvent(t).ok("Yes").cancel("No");i.show(n).then(function(){e.deleteLoading=!0,r.remove(e).then(function(t){o.params.page=1,l()},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error"})}).finally(function(){e.deleteLoading=!1})},function(t){})},o.onPaginate=function(){l()},o.sortBy=function(){l()},o.toggleActive=function(t){var e=angular.copy(t);t.toggleLoading=!0,e.active=!e.active,r.toggleActive(d.merchantId,e).then(function(){t.active=e.active},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error"})}).finally(function(){t.toggleLoading=!1})}}]),angular.module("app").controller("CouponModalController",["$rootScope","$scope","$mdDialog","couponService","coupon","localStorageService","FileUploader","config","merchantService","merchant",function(n,a,e,o,t,i,r,d,s,l){a.coupon=t&&t.id?t:{},a.merchant=l,a.coupon&&a.coupon.id?(a.coupon.start_date=moment(a.coupon.start_date).toDate(),a.coupon.end_date=moment(a.coupon.end_date).toDate(),a.coupon&&a.coupon.files&&_.each(a.coupon.files,function(t){t.extension=t.url.substr(t.url.lastIndexOf(".")+1)})):(a.coupon.start_date=moment().toDate(),a.coupon.end_date=moment().add(1,"days").toDate()),a.uploader=new r({url:d.baseAddress+"coupons/"+a.coupon.id+"/upload-file",headers:{Authorization:i.get("token")}}),a.uploader.filters.push({name:"imageFilter",fn:function(t,e){var n="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|pdf|".indexOf(n)}}),a.uploader.onBeforeUploadItem=function(t){console.log(t),t.url=d.baseAddress+"coupons/"+a.coupon.id+"/upload-file",t.formData.push({coupon_id:a.coupon.id})},a.uploader.onCompleteAll=function(){a.loading=!1,n.$broadcast("toast",{message:"Successfully saved"}),e.hide(a.coupon)},a.save=function(){var t=angular.copy(a.coupon);t.start_date=moment(t.start_date).format("YYYY-MM-DDTHH:mm:ssZ"),t.end_date=moment(t.end_date).format("YYYY-MM-DDTHH:mm:ssZ"),t.merchant_id=a.merchant.id,a.loading=!0,(t.id?o.update(t):o.add(t)).then(function(t){a.uploader.queue&&a.uploader.queue.length?(a.coupon.id=t.id,a.uploader.uploadAll()):(n.$broadcast("toast",{message:"Successfully saved"}),a.loading=!1,e.hide(a.coupon))},function(t){n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})})},a.removeFile=function(e){e.loading=!0,o.removeFile(a.coupon,e).then(function(){a.coupon.files=_.reject(a.coupon.files,function(t){return e.id==t.id})},function(t){n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){e.loading=!1})},a.cancel=function(){e.cancel()}}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout.pixie",{url:"/merchants/:merchantId/coupons?fmm",controller:"CreateCouponModalController",templateUrl:"/app/sections/merchant/coupon/pixieModals/pixieModal.html",requiresLogin:!0})}]).controller("CreateCouponModalController",["$rootScope","$state","$scope","$mdDialog","$mdSidenav","couponService","merchantService","$window","localStorageService","FileUploader","config","merchantService","$stateParams",function(t,e,n,a,o,i,r,d,s,l,c,r,m){n.coupon={},n.cancel=function(){a.hide()},n.openPixieEditor=function(t,e){a.show({controller:"DetailsModalController",templateUrl:"/app/sections/merchant/coupon/pixieModals/modals/detailsModal.html",parent:angular.element(document.body),targetEvent:t,size:"lg",clickOutsideToClose:!1,locals:{merchant:angular.copy(m.merchantId)}})},setTimeout(function(){if(document.getElementById("pixie-id"))new Pixie({onLoad:function(){console.log("pixie is loaded!"),i.setIsOpen(!0)},onOpen:function(){},onSave:function(t,e){i.image=t,n.openPixieEditor()},onClose:function(){a.cancel()},ui:{theme:"light",mode:"inline",replaceDefault:!1,colorPresets:["rgb(193, 236, 0)"],nav:{replaceDefault:!0,position:"bottom",items:[{type:"separator"},{name:"resize",icon:"resize-custom",action:"resize"},{name:"crop",icon:"crop-custom",action:"crop"},{name:"transform",icon:"transform-custom",action:"rotate"},{type:"separator"},{name:"draw",icon:"pencil-custom",action:"draw"},{name:"text",icon:"text-box-custom",action:"text"},{name:"shapes",icon:"polygon-custom",action:"shapes"},{name:"stickers",icon:"sticker-custom",action:"stickers"},{name:"frame",icon:"frame-custom",action:"frame"},{type:"separator"},{name:"corners",icon:"rounded-corner-custom",action:"round"},{name:"background",icon:"background-custom",action:"background"},{name:"merge",icon:"merge-custom",action:"merge"}]},openImageDialog:{show:!0},toolbar:{hideCloseButton:!0}},tools:{shapes:{replaceDefault:!1,items:[{name:"Духић",type:"Path",options:{path:"M500.907,376.747c-64.853-11.093-93.867-75.947-97.28-83.627v-0.853c-3.413-6.827-4.267-11.947-2.56-16.213 c3.413-7.68,17.92-12.8,27.307-15.36c2.56-0.853,5.12-1.707,6.827-2.56c17.92-7.68,27.307-17.067,27.307-28.16 c0-8.533-6.827-17.067-17.067-20.48c-3.413-1.707-7.68-2.56-11.947-2.56c-2.56,0-6.827,0.853-11.093,2.56 c-8.533,3.413-15.36,5.973-20.48,5.973c-1.707,0-3.413,0-5.12-0.853c0.853-2.56,0.853-5.12,0.853-8.533v-1.707 c1.707-34.987,5.12-78.507-6.827-104.107c-34.987-76.8-107.52-82.773-128.853-82.773h-10.24c-21.333,0-93.867,5.973-128,82.773           c-11.947,25.6-9.387,69.12-6.827,104.107c0.853,3.413,0.853,6.827,0.853,10.24c-1.707,0-4.267,0.853-6.827,0.853            c-6.827,0-13.653-1.707-22.187-5.973c-11.947-5.12-34.987,2.56-37.547,17.92c-1.707,8.533,1.707,20.48,27.307,30.72             c1.707,0.853,4.267,1.707,7.68,2.56c8.533,2.56,23.04,7.68,26.453,15.36c1.707,3.413,0.853,9.387-2.56,16.213           c-1.707,2.56-31.573,71.68-98.987,82.773C4.267,376.747,0,382.72,0,389.547c0,2.56,0.853,4.267,1.707,5.973         c5.12,13.653,27.307,22.187,67.413,29.013c0.853,2.56,1.707,7.68,2.56,10.24c0.853,3.413,1.707,7.68,2.56,11.947            c0.853,4.267,5.12,11.093,15.36,11.093c3.413,0,7.68-0.853,11.947-1.707c6.827-1.707,15.36-3.413,26.453-3.413          c6.827,0,12.8,0.853,19.627,2.56c11.947,1.707,23.04,9.387,34.987,17.92c17.92,12.8,34.133,22.187,67.413,22.187            c0.853,0,1.707,0,2.56,0s2.56,0,3.413,0c29.013,0,54.613-7.68,76.8-22.187c11.947-7.68,23.04-16.213,34.987-17.92           c5.973-0.853,12.8-1.707,18.773-1.707c10.24,0,18.773,0.853,26.453,2.56c5.12,0.853,9.387,1.707,12.8,1.707         c6.827,0,12.8-4.267,14.507-11.093c0.853-4.267,1.707-7.68,2.56-11.947c0.853-1.707,1.707-6.827,2.56-9.387         c40.107-5.973,59.733-15.36,65.707-28.16c0.853-1.707,1.707-4.267,1.707-5.973C512.853,384.427,507.733,377.6,500.907,376.747z           M440.32,408.32c-10.24,0.853-11.947,11.093-14.507,22.187c-0.853,2.56-1.707,5.973-2.56,9.387c-1.707,0-4.267,0-8.533-0.853            c-8.533-1.707-17.92-3.413-29.867-3.413c-6.827,0-13.653,0.853-21.333,1.707c-15.36,2.56-29.013,11.947-41.813,21.333           C302.933,472.32,281.6,478.293,256,478.293c-0.853,0-1.707,0-3.413,0c-0.231,0-0.445,0-0.64,0c-0.073,0-0.146,0-0.213,0         c-28.16,0-41.813-8.533-58.027-19.627c-12.8-9.387-25.6-18.773-41.813-21.333c-6.827-0.853-14.507-1.707-21.333-1.707           c-12.8,0-23.04,1.707-29.867,3.413c-3.413,0.853-5.973,1.707-8.533,1.707c-0.853-3.413-1.707-6.827-2.56-10.24          c-2.56-11.093-4.267-21.333-14.507-23.04c-37.547-5.12-50.347-12.8-54.613-16.213c69.973-14.507,102.4-82.773,106.667-92.16         c5.12-11.093,5.973-21.333,2.56-29.867c-6.827-15.36-25.6-21.333-37.547-24.747c-2.56,0-4.267-0.853-5.973-1.707            C71.68,236.8,69.12,231.68,69.12,230.827c0-2.56,5.973-5.973,11.093-5.973c1.707,0,2.56,0,2.56,0           c10.24,5.12,20.48,7.68,29.013,7.68c12.8,0,19.627-5.973,21.333-7.68s2.56-3.413,2.56-5.973c0-5.12-0.853-10.24-0.853-15.36         c-2.56-33.28-5.12-74.24,5.12-96.427c29.867-67.413,93.867-72.533,112.64-72.533h8.533h0.853c18.773,0,82.773,5.12,113.493,70.827           c9.387,22.187,6.827,63.147,5.12,96.427v1.707c0,5.12-0.853,9.387-0.853,13.653c0,2.56,0.853,5.12,2.56,6.827           c1.707,1.707,7.68,6.827,20.48,7.68c8.533-0.853,17.067-3.413,27.307-7.68c1.707-0.853,5.973-0.853,9.387,0.853         c4.267,1.707,5.973,4.267,5.973,5.12c0,1.707-3.413,6.827-17.067,11.947c-1.707,0.853-4.267,1.707-6.827,2.56           c-11.093,3.413-29.867,9.387-36.693,24.747c-4.267,8.533-2.56,18.773,2.56,29.867c3.413,8.533,34.987,78.507,105.813,93.013         C488.96,395.52,477.013,402.347,440.32,408.32z"}}]},frame:{replaceDefault:!1,items:[{name:"test",mode:"streach",size:{min:1,max:35,default:10}}]},text:{replaceDefault:!1,items:[{family:"verdanaaa",category:"display",filePath:"assets/fonts/naturePro.ttf",type:"custom"}]}}})},500),n.goBack=function(){e.go("layout.coupons",{merchantId:m.merchantId})}}]),angular.module("app").controller("DetailsModalController",["$rootScope","$scope","$mdDialog","couponService","localStorageService","FileUploader","config","merchantService","merchant",function(e,n,a,o,t,i,r,d,s){n.coupon={},n.merchant=s,n.coupon.start_date=moment().toDate(),n.coupon.end_date=moment().add(1,"days").toDate(),n.save=function(){var t=angular.copy(n.coupon);t.start_date=moment(t.start_date).format("YYYY-MM-DDTHH:mm:ssZ"),t.end_date=moment(t.end_date).format("YYYY-MM-DDTHH:mm:ssZ"),t.merchant_id=parseInt(n.merchant),t.image=o.image,n.loading=!0,o.add(t).then(function(t){n.coupon.id=t.id,e.$broadcast("toast",{message:"Successfully saved"}),n.loading=!1,a.hide(n.coupon)},function(t){n.loading=!1,e.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})})},n.cancel=function(){a.cancel()}}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout.merchant",{url:"/merchants",controller:"MerchantController",templateUrl:"/app/sections/merchant/merchant.html",requiresLogin:!0})}]).controller("MerchantController",["$rootScope","$scope","$state","$mdDialog","merchantService","$timeout","categoryService",function(a,o,e,r,d,t,n){var s;function l(){o.loading=!0,d.get(o.params).then(function(t){o.merchants=t.merchants,o.total=t.total},function(t){a.$broadcast("toast",{message:t.data.message?t.data.message:"Server error."})}).finally(function(){o.loading=!1})}o.params={page:1,limit:10,sort_by:"id"},o.orderValues=d.orderValues,l(),o.categoryLoading=!0,n.get({limit:10,page:1}).then(function(t){o.categoryLoading=!1,o.categories=t.categories},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}),o.sortMerchants=function(){l()},o.search=function(){o.params.page=1,s&&t.cancel(s),s=t(function(){l()},250)},o.selectFilter=function(){for(i=0;i<4;i++)o.params["filters["+i+"]"]=null;o.filters.forEach(function(t,e){o.params["filters["+e+"]"]=t}),l()},o.openMerchantAdd=function(){d.setMerchantData(null),e.go("layout.merchants-edit")},o.openMerchantEdit=function(t){d.setMerchantData(t),e.go("layout.merchants-edit")},o.removeModal=function(t,e){var n=r.confirm().title("Delete").textContent("Are you sure?").ariaLabel("Delete").targetEvent(t).ok("Yes").cancel("No");r.show(n).then(function(){d.remove(e.id).then(function(t){o.params.page=1,l()},function(t){a.$broadcast("toast",{message:t.data.message?t.data.message:"Server error."})})})},o.sendNotification=function(t,e){console.log("send notification."),r.show({controller:"MerchantNotificationModalController",templateUrl:"/app/sections/merchant/modals/notificationModal/merchantNotificationModal.html",parent:angular.element(document.body),targetEvent:t,size:"lg",clickOutsideToClose:!1,locals:{merchant:angular.copy(e)}}).then(function(t){l()},function(t){})},o.onPaginate=function(){l()}}]),angular.module("app").controller("MerchantModalController",["$rootScope","$scope","$mdDialog","merchantService","merchant","localStorageService","areaService","shoppingCenterService","categoryService","FileUploader","$timeout",function(n,a,e,o,t,i,r,d,s,l,c){var m;a.merchant=t||{},a.merchant&&a.merchant.id&&(a.merchant.area_id&&(a.searchAreaText=a.merchant.area_name),a.merchant.shopping_center_id&&(a.searchTextShoppingCenter=a.merchant.shopping_center_name)),a.save=function(){a.loading=!0;var t=angular.copy(a.merchant);t.user_id=n.session.user_id,t.categories=_.map(t.categories,function(t){return t.id}),(a.merchant.id?o.update(t):o.add(t)).then(function(t){a.merchant=t,a.imagePreparedForUpload?a.uploader.uploadItem(a.imagePreparedForUpload):(n.$emit("toast",{message:"Successfully saved!",type:"success"}),e.hide(a.merchant))},function(t){n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){a.imagePreparedForUpload||(a.loading=!1)})},a.loadArea=function(t){var e={limit:10,page:1};return t&&(e.search=t),r.get(e).then(function(t){return t.areas},function(t){return n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."}),!1})},a.selectArea=function(t){t?a.merchant.area_id=t.id:(a.merchant.area_id=void 0,a.searchAreaText="",a.merchant.shopping_center_id=void 0,a.searchTextShoppingCenter="",a.selectedShoppingCenter=void 0)},a.loadShoppingCenters=function(t){var e={limit:10,page:1};return t&&(e.search=t),a.merchant.area_id&&(e.area=a.merchant.area_id),d.get(e).then(function(t){return t.shopping_centers},function(t){return n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."}),!1})},a.selectShoppingCenter=function(t){t?(a.merchant.shopping_center_id=t.id,t.address&&(a.merchant.address=t.address),t.city&&(a.merchant.city=t.city),t.zip&&(a.merchant.zip=t.zip),a.merchant.area_id||(a.merchant.area_id=t.area_id,a.searchAreaText=t.area_name,a.selectedArea={id:t.area_id,name:t.area_name})):(a.merchant.shopping_center_id=void 0,a.searchTextShoppingCenter="")},a.loadCategories=function(t){return a.categoryLoading=!0,s.get({search:t,limit:10,page:1}).then(function(t){return a.categoryLoading=!1,t.categories},function(t){n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})})},a.uploader=new l({url:config.baseAddress+"merchants/"+a.merchant.id+"/upload-file",headers:{Authorization:i.get("token")},alias:"logo"}),a.uploader.filters.push({name:"imageFilter",fn:function(t,e){var n="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|".indexOf(n)}}),a.uploader.onBeforeUploadItem=function(t){t.url=config.baseAddress+"merchants/"+a.merchant.id+"/upload-file",t.formData.push({id:a.merchant.id})},a.uploader.onCompleteAll=function(){a.loading=!1,n.$emit("toast",{message:"Successfully saved!",type:"success"}),e.hide(a.merchant)},a.uploader.onAfterAddingFile=function(t){a.imagePreparedForUpload=t},a.removeLogo=function(){o.removeFile(a.merchant.id).then(function(){a.imagePreparedForUpload=void 0,a.merchant.logo=void 0},function(t){n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})})},a.geoLocationByZip=function(t){m&&c.cancel(m),m=c(function(){a.loadingByZip=!0,o.geoLocationByZip(t).then(function(t){a.merchant.address=t.address,a.merchant.city=t.city,a.merchant.lat=t.lat,a.merchant.lon=t.lon},function(t){n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){a.loadingByZip=!1})},250)},a.cancel=function(){e.cancel()}}]),angular.module("app").controller("MerchantNotificationModalController",["$rootScope","$scope","$mdDialog","merchantService","merchant","pushNotificationService","localStorageService","areaService","shoppingCenterService","categoryService","FileUploader","$timeout",function(e,n,t,a,o,i,r,d,s,l,c,m){n.merchant=o,n.send=function(){n.loading=!0,i.send(n.notification,"merchant-"+n.merchant.id,n.merchant.id).then(function(t){e.$broadcast("toast",{message:"Successfully sent"}),n.loading=!1},function(t){e.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})})},n.cancel=function(){t.cancel()}}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout.merchant-request",{url:"/merchant-requests",controller:"MerchantRequestController",templateUrl:"/app/sections/merchantRequest/merchantRequest.html",requiresLogin:!0})}]).controller("MerchantRequestController",["$scope","$state","$mdDialog","merchantService",function(n,t,a,e){function o(){n.loading=!0,e.getUnapproved(n.params).then(function(t){n.merchants=t.merchants,n.total=t.total},function(t){$rootScope.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){n.loading=!1})}n.params={page:1,limit:10},o(),n.previewMerchantModal=function(t,e){a.show({controller:"MerchantRequestModalController",templateUrl:"/app/sections/merchantRequest/modals/merchantRequestModal.html",parent:angular.element(document.body),targetEvent:t,size:"lg",clickOutsideToClose:!1,locals:{merchantRequest:angular.copy(e)}}).then(function(t){n.params.page=1,o()},function(t){})},n.onPaginate=function(){o()}}]),angular.module("app").controller("MerchantRequestModalController",["$rootScope","$scope","$mdDialog","merchantService","merchantRequest","localStorageService",function(e,n,a,t,o,i){n.merchant=o,n.approve=function(){n.loadingApprove=!0,t.approve(n.merchant.id).then(function(t){e.$broadcast("toast",{message:"Successfully approved!",type:"success"}),a.hide()},function(t){e.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){n.loadingApprove=!1})},n.reject=function(){n.loadingReject=!0,t.reject(n.merchant.id).then(function(t){n.$emit("toast",{message:"Successfully rejected!",type:"success"}),a.hide()},function(t){e.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){n.loadingReject=!1})},n.cancel=function(){a.cancel()}}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout.push-notification",{url:"/push-notification",controller:"PushNotificationController",templateUrl:"/app/sections/pushNotifications/pushNotification.html",requiresLogin:!0})}]).controller("PushNotificationController",["$rootScope","$scope","$state","configFireBase","pushNotificationService",function(n,a,t,e,o){a.user=n.session,console.log(a.user),a.send=function(){var t,e;a.loading=!0,"admin"!=a.user.role?(t="merchant-"+a.user.user_id,e=10188):t="admin",o.send(a.notification,t,e).then(function(t){n.$broadcast("toast",{message:"Successfully sent"}),a.loading=!1},function(t){n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})})}}]),angular.module("app").config(["$stateProvider",function(t){t.state("register",{url:"/register",controller:"RegisterController",templateUrl:"/app/sections/register/register.html"})}]).controller("RegisterController",["$scope","$state","$mdDialog","userService","localStorageService","$rootScope","areaService","shoppingCenterService","merchantService","categoryService","$timeout",function(n,t,e,a,o,i,r,d,s,l,c){var m;n.user={email:""},n.merchant={},n.selectedTabIndex=0,n.userTypes=a.userTypes,n.data={},n.step=1,n.selectStep=function(t){n.step=t},n.loadArea=function(t){var e={limit:10,page:1};return t&&(e.search=t),r.get(e).then(function(t){return t.areas},function(t){return i.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."}),!1})},n.selectArea=function(t){t?n.userType.area_id=t.id:(n.userType.area_id=void 0,n.userType.shopping_center_id=void 0,n.data.searchAreaText="",n.data.searchTextShoppingCenter="",n.data.selectedShoppingCenter=void 0)},n.loadShoppingCenters=function(t){var e={limit:10,page:1};return t&&(e.search=t),n.userType.area_id&&(e.area=n.userType.area_id),d.get(e).then(function(t){return t.shopping_centers},function(t){return i.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."}),!1})},n.selectShoppingCenter=function(t){t?(n.userType.shopping_center_id=t.id,n.userType.address=t.address,n.userType.city=t.city,n.userType.zip=t.zip):(n.userType.shopping_center_id=void 0,n.searchTextShoppingCenter="")},n.loadCategories=function(t){return l.get({search:t,limit:10,page:1}).then(function(t){return t.categories},function(t){i.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})})},n.registerUser=function(){n.loading=!0,n.data.selectedUserType&&(n.user.type=n.data.selectedUserType.id),a.register(n.user).then(function(t){n.step=2,n.user=t},function(t){i.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){n.loading=!1})},n.changeUserType=function(){n.userType={}},n.register=function(){if(n.data.selectedUserType&&n.user&&n.user.id){n.loading=!0;var t=angular.copy(n.userType);t.user_id=n.user.id,1==n.data.selectedUserType.id&&(t.categories=_.map(t.categories,function(t){return t.id})),(1==n.data.selectedUserType.id?s.add(t):d.add(t)).then(function(){n.step=3},function(t){i.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){n.loading=!1})}},n.checkEmail=function(t){a.checkEmail({email:t}).then(function(t){},function(t){n.user.email="",i.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})})},n.openTimeModal=function(t){e.show({controller:"ShoppingCenterTimeModalController",templateUrl:"/app/sections/shoppingCenters/modals/shoppingCenterTimeModal.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0}).then(function(t){var e=0;_.each(t,function(t){"Invalid date"==t.to&&"Invalid date"==t.from&&e++}),e!=t.length&&(n.userType.working_hours=t)},function(t){})},n.geoLocationByZip=function(t){m&&c.cancel(m),m=c(function(){n.loadingByZip=!0,s.geoLocationByZip(t).then(function(t){n.userType.address=t.address,n.userType.city=t.city,n.userType.lat=t.lat,n.userType.lon=t.lon},function(t){i.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){n.loadingByZip=!1})},250)}}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout.settings",{url:"/settings",controller:"SettingsController",templateUrl:"/app/sections/settings/settings.html",requiresLogin:!0})}]).controller("SettingsController",["$rootScope","$scope","$mdDialog","userService","merchantService","shoppingCenterService",function(n,e,a,t,o,i){e.session=n.session,e.userRoles=t.userRoles,e.user={},e.profileEdit=!1,e.loading=!0,t.me().then(function(t){e.loading=!1,console.log(t),e.user=t},function(t){n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server  error."})}),e.data={},e.user.id||(e.user.type=e.userRoles[1].id),e.save=function(){e.loading=!0,(e.user.id?t.update(e.user):t.add(e.user)).then(function(t){a.hide(t)},function(t){n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){e.loading=!1})},e.loadMerchants=function(t){var e={limit:10,page:1};return t&&(e.search=t),o.get(e).then(function(t){return t.merchants},function(t){return n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."}),!1})},e.selectMerchant=function(t){t?e.user.merchant_id=t.id:(e.user.merchant_id=void 0,e.data.searchMerchantText="")},e.loadShoppingCenters=function(t){var e={limit:10,page:1};return t&&(e.search=t),i.get(e).then(function(t){return t.shopping_centers},function(t){return n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."}),!1})},e.selectShoppingCenter=function(t){t?e.user.shopping_center_id=t.id:(e.user.shopping_center_id=void 0,e.data.searchTextShoppingCenter="")},e.roleChanged=function(){e.user.shopping_center_id=void 0,e.user.merchant_id=void 0,e.data={}},e.cancel=function(){a.cancel()}}]),angular.module("app").controller("MerchantListModalController",["$rootScope","$scope","$mdDialog","shoppingCenterService","shoppingCenter","$state","merchantService",function(a,o,i,t,r,e,d){function n(){o.loading=!0,t.getMerchantsByShoppingCenter(o.shoppingCenter.id,o.params).then(function(t){o.merchants=t.merchants,o.total=t.total},function(){a.$broadcast("toast",{message:err.data&&err.data.message?err.data.message:"Server error."})}).finally(function(){o.loading=!1})}o.shoppingCenter=r,o.params={page:1,limit:10},n(),o.cancel=function(){i.cancel()},o.sortMerchants=function(){n()},o.goToCouponsPage=function(t){console.log("click"),e.go("layout.coupons",{merchantId:t.id,fmm:!0}),i.cancel()},o.openMerchantModal=function(e,t){i.show({controller:"MerchantModalController",templateUrl:"/app/sections/merchant/modals/merchantModal.html",parent:angular.element(document.body),targetEvent:e,size:"lg",clickOutsideToClose:!1,locals:{merchant:angular.copy(t)}}).then(function(t){i.show({controller:"MerchantListModalController",templateUrl:"/app/sections/shoppingCenters/modals/merchantListModal.html",parent:angular.element(document.body),targetEvent:e,size:"lg",clickOutsideToClose:!1,locals:{shoppingCenter:angular.copy(r)}}).then(function(t){},function(t){})},function(t){i.show({controller:"MerchantListModalController",templateUrl:"/app/sections/shoppingCenters/modals/merchantListModal.html",parent:angular.element(document.body),targetEvent:e,size:"lg",clickOutsideToClose:!1,locals:{shoppingCenter:angular.copy(r)}}).then(function(t){},function(t){})})},o.removeModal=function(e,t){var n=i.confirm().title("Delete").textContent("Are you sure?").ariaLabel("Delete").targetEvent(e).ok("Yes").cancel("No");i.show(n).then(function(){d.remove(t.id).then(function(t){o.params.page=1,i.show({controller:"MerchantListModalController",templateUrl:"/app/sections/shoppingCenters/modals/merchantListModal.html",parent:angular.element(document.body),targetEvent:e,size:"lg",clickOutsideToClose:!1,locals:{shoppingCenter:angular.copy(r)}}).then(function(t){},function(t){})},function(t){a.$broadcast("toast",{message:t.data.message?t.data.message:"Server error."})})},function(){i.show({controller:"MerchantListModalController",templateUrl:"/app/sections/shoppingCenters/modals/merchantListModal.html",parent:angular.element(document.body),targetEvent:e,size:"lg",clickOutsideToClose:!1,locals:{shoppingCenter:angular.copy(r)}}).then(function(t){},function(t){})})},o.onPaginate=function(){n()}}]),angular.module("app").controller("ShoppingCenterModalController",["$rootScope","$scope","$mdDialog","shoppingCenterService","localStorageService","shoppingCenter","areaService","merchantService","FileUploader","$timeout",function(a,o,i,r,t,e,n,d,s,l){var c;o.shoppingCenter=e&&e.id?e:{},o.all={from:"",to:""},o.shoppingCenter.id?(o.searchAreaText=o.shoppingCenter.area_name,o.shoppingCenter.working_hours||(o.shoppingCenter.working_hours=angular.copy(r.workingDays)),_.each(o.shoppingCenter.working_hours,function(t){t.from&&(t.from=moment(t.from,["hh:mm A"]).toDate()),t.to&&(t.to=moment(t.to,["hh:mm A"]).toDate())})):o.shoppingCenter.working_hours=angular.copy(r.workingDays),o.uploader=new s({url:config.baseAddress+"shopping-centers/"+o.shoppingCenter.id+"/upload-file",headers:{Authorization:t.get("token")},alias:"logo"}),o.uploader.filters.push({name:"imageFilter",fn:function(t,e){var n="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|".indexOf(n)}}),o.uploader.onBeforeUploadItem=function(t){t.url=config.baseAddress+"shopping-centers/"+o.shoppingCenter.id+"/upload-file",t.formData.push({id:o.shoppingCenter.id})},o.uploader.onCompleteAll=function(){o.loading=!1,a.$emit("toast",{message:"Successfully saved!",type:"success"}),i.hide(o.shoppingCenter)},o.uploader.onAfterAddingFile=function(t){o.imagePreparedForUpload=t},o.removeLogo=function(){r.removeFile(o.shoppingCenter.id).then(function(){o.imagePreparedForUpload=void 0,o.shoppingCenter.logo=void 0},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})})},o.setTime=function(){_.each(o.shoppingCenter.working_hours,function(t){t.from=o.all.from,t.to=o.all.to})},o.geoLocationByZip=function(t){if(c&&l.cancel(c),!t)return!1;c=l(function(){o.loadingByZip=!0,d.geoLocationByZip(t).then(function(t){t.address&&(o.shoppingCenter.address=t.address),t.city&&(o.shoppingCenter.city=t.city),t.lat&&(o.shoppingCenter.lat=t.lat),t.lon&&(o.shoppingCenter.lon=t.lon)},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){o.loadingByZip=!1})},250)},o.save=function(){o.loading=!0;var t=angular.copy(o.shoppingCenter),e=!0,n=0;if(_.each(t.working_hours,function(t){(t.from||t.to)&&(_.isDate(t.from)||_.isDate(t.to))||n++,t.from&&t.to&&(t.from=moment(t.from).format("hh:mm A"),t.to=moment(t.to).format("hh:mm A")),t.from&&!t.to&&(e=!1),!t.from&&t.to&&(e=!1)}),!e)return a.$broadcast("toast",{message:"Please fill all required fields in working hours section."}),o.loading=!1;n==t.working_hours.length&&delete t.working_hours,_.isNull(t.website)&&delete t.website,t.user_id=a.session.user_id,(t.id?r.update(t):r.add(t)).then(function(t){o.imagePreparedForUpload?o.uploader.uploadItem(o.imagePreparedForUpload):(a.$emit("toast",{message:"Successfully saved!",type:"success"}),o.loading=!1,i.hide(t))},function(t){o.loading=!1,a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})})},o.loadArea=function(t){var e={limit:10,page:1};return t&&(e.search=t),n.get(e).then(function(t){return t.areas},function(t){return a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."}),!1})},o.selectArea=function(t){t?o.shoppingCenter.area_id=t.id:(o.shoppingCenter.area_id=void 0,o.searchAreaText="")},o.cancel=function(){i.cancel()}}]),angular.module("app").controller("ShoppingCenterTimeModalController",["$rootScope","$scope","$mdDialog","shoppingCenterService",function(t,e,n,a){e.all={from:"",to:""},e.workingDays=angular.copy(a.workingDays),e.setTime=function(){_.each(e.workingDays,function(t){t.from=e.all.from,t.to=e.all.to})},e.save=function(){_.each(e.workingDays,function(t){t.from=moment(t.from).format("hh:mm A"),t.to=moment(t.to).format("hh:mm A")}),n.hide(e.workingDays)},e.cancel=function(){n.cancel()}}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout.shopping-centers",{url:"/shopping-centers",controller:"ShoppingCenterController",templateUrl:"/app/sections/shoppingCenters/shopping-centers.html",requiresLogin:!0})}]).controller("ShoppingCenterController",["$rootScope","$scope","$state","$mdDialog","shoppingCenterService","$timeout","merchantService",function(a,o,t,i,r,e,n){var d;function s(){o.loading=!0,r.get(o.params).then(function(t){o.shoppingCenters=t.shopping_centers,o.total=t.total},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){o.loading=!1})}o.params={page:1,limit:10},s(),o.merchantsModal=function(t,e){i.show({controller:"MerchantListModalController",templateUrl:"/app/sections/shoppingCenters/modals/merchantListModal.html",parent:angular.element(document.body),targetEvent:t,size:"lg",clickOutsideToClose:!1,locals:{shoppingCenter:angular.copy(e)}}).then(function(t){},function(t){})},o.shoppingCenterModal=function(t,e){i.show({controller:"ShoppingCenterModalController",templateUrl:"/app/sections/shoppingCenters/modals/shoppingCenterModal.html",parent:angular.element(document.body),targetEvent:t,size:"lg",clickOutsideToClose:!1,locals:{shoppingCenter:angular.copy(e)}}).then(function(t){o.params.page=1,s()},function(t){})},o.removeModal=function(t,e){var n=i.confirm().title("Delete").textContent("Are you sure?").ariaLabel("Delete").targetEvent(t).ok("Yes").cancel("No");i.show(n).then(function(){e.loading=!0,r.remove(e).then(function(t){o.params.page=1,s()},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error"})}).finally(function(){e.loading=!1})},function(t){})},o.search=function(){o.params.page=1,d&&e.cancel(d),d=e(function(){s()},250)},o.onPaginate=function(){s()},o.sortShoppingCenters=function(){s()}}]),angular.module("app").controller("PasswordModalController",["$rootScope","$scope","$mdDialog","userService","user",function(e,t,n,a,o){t.user=o,t.session=e.session,t.save=function(){t.loading=!0,t.model.id=t.user.id,a.changePassword(t.model).then(function(t){e.$broadcast("toast",{message:"Successfully changed!"}),n.hide(t)},function(t){e.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){t.loading=!1})},t.cancel=function(){n.cancel()}}]),angular.module("app").controller("UserModalController",["$rootScope","$scope","$mdDialog","userService","user","profileEdit","merchantService","shoppingCenterService",function(n,e,a,t,o,i,r,d){e.session=n.session,e.userRoles=t.userRoles,e.user=o||{},e.profileEdit=i,e.data={},e.user.id||(e.user.type=e.userRoles[1].id),e.save=function(){e.loading=!0,(e.user.id?t.update(e.user):t.add(e.user)).then(function(t){a.hide(t)},function(t){n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){e.loading=!1})},e.loadMerchants=function(t){var e={limit:10,page:1};return t&&(e.search=t),r.get(e).then(function(t){return t.merchants},function(t){return n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."}),!1})},e.selectMerchant=function(t){t?e.user.merchant_id=t.id:(e.user.merchant_id=void 0,e.data.searchMerchantText="")},e.loadShoppingCenters=function(t){var e={limit:10,page:1};return t&&(e.search=t),d.get(e).then(function(t){return t.shopping_centers},function(t){return n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."}),!1})},e.selectShoppingCenter=function(t){t?e.user.shopping_center_id=t.id:(e.user.shopping_center_id=void 0,e.data.searchTextShoppingCenter="")},e.roleChanged=function(){e.user.shopping_center_id=void 0,e.user.merchant_id=void 0,e.data={}},e.cancel=function(){a.cancel()}}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout.password-change",{url:"/users/password-change",controller:"PasswordModalController",templateUrl:"/app/sections/users/passwordChange/passwordModal.html",requiresLogin:!0})}]).controller("PasswordModalController",["$rootScope","$scope","$state","$mdDialog","userService","$stateParams",function(e,t,n,a,o,i){t.user=o.getUser(),t.session=e.session,t.save=function(){t.loading=!0,t.model.id=t.user.id,o.changePassword(t.model).then(function(t){e.$broadcast("toast",{message:"Successfully changed!"}),a.hide(t)},function(t){e.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){t.loading=!1})},t.cancel=function(){a.cancel()}}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout.users",{url:"/users",controller:"UserController",templateUrl:"/app/sections/users/users.html",requiresLogin:!0})}]).controller("UserController",["$rootScope","$scope","$state","$mdDialog","userService","$timeout",function(a,o,e,i,r,t){var n;function d(){o.loading=!0,r.get(o.params).then(function(t){o.users=t.users,o.total=t.total},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){o.loading=!1})}o.params={page:1,limit:10,sort_by:"id"},o.userTypes=r.userTypes,o.userRoles=r.userRoles,o.userRolesObject=r.userRolesObject,d(),o.sortUsers=function(){d()},o.deleteUser=function(t,e){var n=i.confirm().title("Delete").textContent("Are you sure?").ariaLabel("Delete").targetEvent(t).ok("Yes").cancel("No");i.show(n).then(function(){o.loading=!0,r.remove(e).then(function(t){o.params.page=1,d()},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error"})}).finally(function(){o.loading=!1})},function(t){})},o.toggleActive=function(t){t.loading=!0,(t.active?r.activate(t):r.deactivate(t)).then(function(t){a.$broadcast("toast",{message:"Successfully updated!"})},function(t){a.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){t.loading=!1})},o.openPasswordChange=function(t){r.setUser(t),e.go("layout.password-change")},o.openUserEdit=function(t){r.setUser(t,!1),e.go("layout.user-edit")},o.search=function(){o.params.page=1,n&&t.cancel(n),n=t(function(){d()},250)},o.onPaginate=function(){d()},o.filterRoleChanges=function(){d()}}]),angular.module("app").config(["$stateProvider",function(t){t.state("layout.user-edit",{url:"/users/user-edit",controller:"UserModalController",templateUrl:"/app/sections/users/userEdit/userModal.html",requiresLogin:!0})}]).controller("UserModalController",["$rootScope","$scope","$mdDialog","userService","merchantService","shoppingCenterService",function(n,e,a,t,o,i){e.session=n.session,e.userRoles=t.userRoles,e.user=t.getUser(),e.profileEdit=t.isProfileEdit(),e.data={},e.user.id||(e.user.type=e.userRoles[1].id),e.save=function(){e.loading=!0,(e.user.id?t.update(e.user):t.add(e.user)).then(function(t){a.hide(t)},function(t){n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."})}).finally(function(){e.loading=!1})},e.loadMerchants=function(t){var e={limit:10,page:1};return t&&(e.search=t),o.get(e).then(function(t){return t.merchants},function(t){return n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."}),!1})},e.selectMerchant=function(t){t?e.user.merchant_id=t.id:(e.user.merchant_id=void 0,e.data.searchMerchantText="")},e.loadShoppingCenters=function(t){var e={limit:10,page:1};return t&&(e.search=t),i.get(e).then(function(t){return t.shopping_centers},function(t){return n.$broadcast("toast",{message:t.data&&t.data.message?t.data.message:"Server error."}),!1})},e.selectShoppingCenter=function(t){t?e.user.shopping_center_id=t.id:(e.user.shopping_center_id=void 0,e.data.searchTextShoppingCenter="")},e.roleChanged=function(){e.user.shopping_center_id=void 0,e.user.merchant_id=void 0,e.data={}},e.cancel=function(){a.cancel()}}]),angular.module("app").factory("areaService",["$http","config","$q",function(e,n,a){var t={},o={};return t.get=function(t){return e({url:n.baseAddress+"areas",method:"GET",params:t}).then(function(t){return t.data},function(t){return a.reject(t)})},t.add=function(t){return e({url:n.baseAddress+"areas",method:"POST",data:t}).then(function(t){return t.data},function(t){return a.reject(t)})},t.update=function(t){return e({url:n.baseAddress+"areas/"+t.id,method:"PUT",data:t}).then(function(t){return t.data},function(t){return a.reject(t)})},t.remove=function(t){return e({url:n.baseAddress+"areas/"+t.id,method:"DELETE",data:t}).then(function(t){return t.data},function(t){return a.reject(t)})},t.setAreaData=function(t){o=t},t.getAreaData=function(){return o},t}]),angular.module("app").factory("categoryService",["$http","config","$q",function(e,n,a){var t={},o={};return t.get=function(t){return e({url:n.baseAddress+"categories",method:"GET",params:t}).then(function(t){return t.data},function(t){return a.reject(t)})},t.add=function(t){return e({url:n.baseAddress+"categories",method:"POST",data:t}).then(function(t){return t.data},function(t){return a.reject(t)})},t.update=function(t){return e({url:n.baseAddress+"categories/"+t.id,method:"PUT",data:t}).then(function(t){return t.data},function(t){return a.reject(t)})},t.remove=function(t){return e({url:n.baseAddress+"categories/"+t.id,method:"DELETE"}).then(function(t){return t.data},function(t){return a.reject(t)})},t.removeFile=function(t){return e({url:n.baseAddress+"categories/"+t+"/remove-file",method:"DELETE",data:{id:t}}).then(function(t){return t.data},function(t){return a.reject(t)})},t.setCategoryData=function(t){o=t},t.getCategoryData=function(){return o},t}]),angular.module("app").factory("couponService",["$http","config","$q",function(a,o,i){var t={},e=!0;return t.setIsOpen=function(t){e=t},t.isOpen=function(){return e},t.toggleActive=function(t,e){var n;return n=e.active?o.baseAddress+"coupons/"+e.id+"/activate":o.baseAddress+"coupons/"+e.id+"/deactivate",a({url:n,method:"PUT"}).then(function(t){return t.data},function(t){return i.reject(t)})},t.remove=function(t){return a({url:o.baseAddress+"coupons/"+t.id,method:"DELETE"}).then(function(t){return t.data},function(t){return i.reject(t)})},t.removeFile=function(t,e,n){return a({url:o.baseAddress+"coupons/"+t.id+"/remove-file/"+e.id,method:"DELETE",params:n}).then(function(t){return t.data},function(t){return i.reject(t)})},t.add=function(t){return a({url:o.baseAddress+"coupons",method:"POST",data:t}).then(function(t){return t.data},function(t){return i.reject(t)})},t.update=function(t){return a({url:o.baseAddress+"coupons/"+t.id,method:"PUT",data:t}).then(function(t){return t.data},function(t){return i.reject(t)})},t}]),angular.module("app").factory("merchantService",["$http","config","$q",function(n,a,o){var t={},e={};return t.orderValues=[{val:"name",text:"A-Z by name"},{val:"-name",text:"Z-A by name"}],t.getCount=function(t){return n({url:a.baseAddress+"merchants/count",method:"GET",params:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.getUnapprovedCount=function(t){return n({url:a.baseAddress+"merchants/unapproved-count",method:"GET",params:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.get=function(t){return n({url:a.baseAddress+"merchants",method:"GET",params:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.remove=function(t,e){return n({url:a.baseAddress+"merchants/"+t,method:"DELETE",params:e}).then(function(t){return t.data},function(t){return o.reject(t)})},t.add=function(t){return n({url:a.baseAddress+"merchants",method:"POST",data:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.update=function(t){return n({url:a.baseAddress+"merchants/"+t.id,method:"PUT",data:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.getCouponsForMerchant=function(t,e){return n({url:a.baseAddress+"merchants/"+t+"/coupons",method:"GET",params:e}).then(function(t){return t.data},function(t){return o.reject(t)})},t.getById=function(t){return n({url:a.baseAddress+"merchants/"+t,method:"GET"}).then(function(t){return t.data},function(t){return o.reject(t)})},t.getUnapproved=function(t){return n({url:a.baseAddress+"merchants/unapproved",method:"GET",params:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.approve=function(t,e){return n({url:a.baseAddress+"merchants/"+t+"/approve",method:"PUT",data:e}).then(function(t){return t.data},function(t){return o.reject(t)})},t.reject=function(t,e){return n({url:a.baseAddress+"merchants/"+t+"/disapprove",method:"PUT",data:e}).then(function(t){return t.data},function(t){return o.reject(t)})},t.removeFile=function(t){return n({url:a.baseAddress+"merchants/"+t+"/remove-file",method:"DELETE",data:{id:t}}).then(function(t){return t.data},function(t){return o.reject(t)})},t.geoLocationByZip=function(t){return n({url:a.baseAddress+"merchants/get-address/"+t,method:"GET"}).then(function(t){return t.data},function(t){return o.reject(t)})},t.setMerchantData=function(t){e={},e=t},t.getMerchantData=function(){return e},t}]),angular.module("app").factory("pushNotificationService",["$http","config","$q",function(a,o,i){var r,t={};return t.send=function(t,e,n){return r=""==e?"admin":e,a({url:o.baseAddress+"/notification",method:"POST",data:{topic:r,notification_title:t.title,notification_body:t.description,action_id:n,action:"merchant",merchant_id:n}}).then(function(t){return t.data},function(t){return i.reject(t)})},t}]),angular.module("app").factory("shoppingCenterService",["$http","config","$q",function(n,a,o){var t={workingDays:[{day:"Monday",from:"",to:""},{day:"Tuesday",from:"",to:""},{day:"Wednesday",from:"",to:""},{day:"Thursday",from:"",to:""},{day:"Friday",from:"",to:""},{day:"Saturday",from:"",to:""},{day:"Sunday",from:"",to:""}],get:function(t){return n({url:a.baseAddress+"shopping-centers",method:"GET",params:t}).then(function(t){return t.data},function(t){return o.reject(t)})},add:function(t){return n({url:a.baseAddress+"shopping-centers",method:"POST",data:t}).then(function(t){return t.data},function(t){return o.reject(t)})},update:function(t){return n({url:a.baseAddress+"shopping-centers/"+t.id,method:"PUT",data:t}).then(function(t){return t.data},function(t){return o.reject(t)})},remove:function(t){return n({url:a.baseAddress+"shopping-centers/"+t.id,method:"DELETE"}).then(function(t){return t.data},function(t){return o.reject(t)})},getMerchantsByShoppingCenter:function(t,e){return n({url:a.baseAddress+"shopping-centers/"+t+"/merchants",method:"GET",params:e}).then(function(t){return t.data},function(t){return o.reject(t)})},removeFile:function(t){return n({url:a.baseAddress+"shopping-centers/"+t+"/remove-file",method:"DELETE",data:{id:t}}).then(function(t){return t.data},function(t){return o.reject(t)})}};return t}]),angular.module("app").factory("stateService",["$http","config","$q",function(e,n,a){var t={get:function(t){return e({url:n.baseAddress+"states",method:"GET",params:t}).then(function(t){return t.data},function(t){return a.reject(t)})}};return t}]),angular.module("app").factory("userService",["$http","config","$q",function(n,a,o){var t={},i={};return t.userRolesObject={1:"Merchant",2:"Shopping Center"},t.userTypes=[{name:"Merchant",id:1},{name:"Shopping Center",id:2}],t.userRoles=[{name:"All"},{name:"Merchant",id:1},{name:"Shopping Center",id:2}],t.setUser=function(t,e){i=t,e=e},t.getUser=function(){return i},t.isProfileEdit=function(){},t.login=function(t){return n({url:a.baseAddress+"login",method:"POST",data:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.register=function(t){return n({url:a.baseAddress+"register",method:"POST",data:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.get=function(t){return n({url:a.baseAddress+"users",method:"GET",params:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.me=function(t){return n({url:a.baseAddress+"users/me",method:"GET",params:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.add=function(t){return n({url:a.baseAddress+"users",method:"POST",data:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.update=function(t){return n({url:a.baseAddress+"users/"+t.id,method:"PUT",data:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.changePassword=function(t){return n({url:a.baseAddress+"users/"+t.id+"/change-password",method:"PUT",data:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.forgotPassword=function(t){return n({url:a.baseAddress+"password/email",method:"POST",data:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.passwordReset=function(t){return n({url:a.baseAddress+"password/reset",method:"POST",data:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.checkEmail=function(t){return n({url:a.baseAddress+"check-email",method:"GET",params:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.activate=function(t){return n({url:a.baseAddress+"users/"+t.id+"/activate",method:"PUT",data:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.deactivate=function(t){return n({url:a.baseAddress+"users/"+t.id+"/deactivate",method:"PUT",data:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.getHomeInformation=function(t){return n({url:a.baseAddress+"users/get-info",method:"GET",params:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t.remove=function(t,e){return n({url:a.baseAddress+"users/"+t.id,method:"DELETE",params:e}).then(function(t){return t.data},function(t){return o.reject(t)})},t.confirmEmail=function(t){return n({url:a.baseAddress+"users/confirm/email",method:"POST",data:t}).then(function(t){return t.data},function(t){return o.reject(t)})},t}]),angular.module("lic.templates",[]).run(["$templateCache",function(t){"use strict";t.put("/app/sections/areas/addEditAreas/areaAddEdit.html",'\x3c!-- md-dialog aria-label="Modal" flex> --\x3e\n<div flex layout="column" >\n    <span class="table-title">Area {{area.id ? \'Edit - \' + area.name : \'Add\'}}</span>\n    <form name="form">\n        \x3c!-- <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2>Area {{area.id ? \'Edit - \' + area.name : \'Add\'}}</h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar> --\x3e\n        <md-content>\n            <div flex layout="column" layout-padding>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Name</label>\n                        <input ng-model="area.name" name="name" required type="text">\n                        <em class="error-message" ng-show="form.name.$error.required">Please enter area name</em>\n                    </md-input-container>\n                </div>\n                <div flex>\n                    <md-autocomplete md-input-name="state" md-selected-item="selectedState" md-search-text="searchStateText" md-selected-item-change="selectState(state)"\n                        md-items="state in loadStates(searchStateText)" md-item-text="state.name" md-require-match required md-delay="300"\n                        md-min-length="0" md-floating-label="State">\n                        <md-item-template>\n                            <span md-highlight-text="searchStateText">{{state.name}}</span>\n                        </md-item-template>\n                        <md-not-found>\n                            No matching "{{searchStateText}}" states were found.\n                        </md-not-found>\n                        <em class="error-message" ng-show="form.state.$error.required">Please select state</em>\n                    </md-autocomplete>\n                </div>\n            </div>\n        </md-content>\n        <section layout="row">\n            \x3c!-- <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button> --\x3e\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary" ng-disabled="form.$invalid || loading">\n                <span ng-show="loading">Please wait...</span>\n                <span ng-show="!loading && area.id"><span class="icon-lic-update btn-icon"></span> Update</span>\n                <span ng-show="!loading && !area.id"><span class="icon-lic-save btn-icon"></span> Add</span>\n            </md-button>\n        </section>\n    </form>\n\x3c!-- </md-dialog> --\x3e'),t.put("/app/sections/areas/area.html",'<div>\n    <div layout="column">\n        <span class="table-title padding-bottom">\n            \x3c!-- <i class="fa fa-database" aria-hidden="true"></i> --\x3e\n             Areas</span>\n        <form novalidate flex layout="row" ng-submit="search()">\n            <md-input-container flex>\n                <label>Search</label>\n                <input type="text" autocomplete="off" ng-disabled="!total && !params.search" ng-model="params.search" ng-change="search()">\n            </md-input-container>\n           \x3c!--  <md-button class="md-fab md-mini" type="submit" ng-disabled="!total && !params.search" aria-label="Search">\n                <i class="fa fa-search"></i>\n            </md-button> --\x3e\n            <md-input-container class="no">\n                <md-button class="md-raised md-primary" type="button" ng-click="openAreaAdd()" aria-label="Add">\n                    <span class="icon-lic-add btn-icon"></span>Add New Area\n                </md-button>\n            </md-input-container>\n        </form>\n        <h4 ng-show="loading" class="text-center">Please wait...</h4>\n        <md-table-container ng-if="total > 0 && !loading">\n            <table md-table md-progress="promise">\n                <thead md-head md-order="params.sort_by" md-on-reorder="sortAreas">\n                    <tr md-row>\n\t\t\t\t\t\t\t\t\t\t\t\t<th md-column md-order-by="name">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>Name</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-sort" aria-hidden="true">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-tooltip md-direction="bottom">Sort by Area name</md-tooltip>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t\t\t\t</th>\n                    </tr>\n                </thead>\n                <tbody md-body>\n                    <tr md-row ng-repeat="area in areas track by $index">\n                        <td md-cell ng-bind="area.name"></td>\n                        <td md-cell text-right>\n                            <md-button class="md-accent md-hue-1 md-icon-button td-btn-edit" ng-click="openAreaEdit(area)">\n                                <span class="icon-lic-edit" aria-hidden="true"></span>\n                                <md-tooltip md-direction="bottom">Edit</md-tooltip>\n                            </md-button>\n                            <md-button class="md-icon-button md-warn td-btn-delete" ng-disabled="area.loading" ng-click="removeModal($event, area)">\n                                <span class="icon-lic-delete" aria-hidden="true"></span>\n                                <md-tooltip md-direction="bottom">Delete</md-tooltip>\n                            </md-button>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </md-table-container>\n        <h4 ng-show="!loading && !total && !params.search" class="text-center">Currently there are no areas in your database.</h4>\n        <md-table-pagination ng-if="total > 0 && !loading"\n                             md-options="[10, 20, 30]"\n                             md-limit="params.limit"\n                             md-page="params.page"\n                             md-total="{{total}}"\n                             md-on-paginate="onPaginate"\n                             md-page-select></md-table-pagination>\n    </div>\n</div>'),t.put("/app/sections/areas/modals/areaModal.html",'<md-dialog aria-label="Modal" flex>\n    <form name="form">\n        <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2>Area {{area.id ? \'Edit - \' + area.name : \'Add\'}}</h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar>\n        <md-dialog-content>\n            <div class="md-dialog-content">\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Name</label>\n                        <input ng-model="area.name" name="name" required type="text">\n                        <em class="error-message" ng-show="form.name.$error.required">Please enter area name</em>\n                    </md-input-container>\n                </div>\n                <div flex>\n                    <md-autocomplete md-input-name="state" md-selected-item="selectedState" md-search-text="searchStateText" md-selected-item-change="selectState(state)"\n                        md-items="state in loadStates(searchStateText)" md-item-text="state.name" md-require-match required md-delay="300"\n                        md-min-length="0" md-floating-label="State">\n                        <md-item-template>\n                            <span md-highlight-text="searchStateText">{{state.name}}</span>\n                        </md-item-template>\n                        <md-not-found>\n                            No matching "{{searchStateText}}" states were found.\n                        </md-not-found>\n                        <em class="error-message" ng-show="form.state.$error.required">Please select state</em>\n                    </md-autocomplete>\n                </div>\n            </div>\n        </md-dialog-content>\n        <md-dialog-actions layout="row">\n            <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button>\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary" ng-disabled="form.$invalid || loading">\n                <span ng-show="loading">Please wait...</span>\n                <span ng-show="!loading && area.id">Update</span>\n                <span ng-show="!loading && !area.id">Add</span>\n            </md-button>\n        </md-dialog-actions>\n    </form>\n</md-dialog>'),t.put("/app/sections/categories/categories.html",'<div>\n    <div layout="column">\n        <span class="table-title padding-bottom">\n            \x3c!-- <i class="fa fa-database" aria-hidden="true"></i>  --\x3e\n        Categories</span>\n        <form novalidate flex layout="row" ng-submit="search()">\n            <md-input-container flex>\n                <label>Search</label>\n                <input type="text" autocomplete="off" ng-disabled="!total && !params.search" ng-model="params.search"\n                       ng-change="search()">\n            </md-input-container>\n            \x3c!-- <md-button class="md-fab md-mini" type="submit" ng-disabled="!total && !params.search" aria-label="Search">\n                <i class="fa fa-search"></i>\n            </md-button> --\x3e\n            <md-input-container class="no">\n                <md-button class="md-raised md-primary" type="button" ng-click="openCategoryAdd()" aria-label="Add">\n                    <span class="icon-lic-add btn-icon"></span>Add New Category\n                </md-button>\n            </md-input-container>\n        </form>\n        <h4 ng-show="loading" class="text-center">Please wait...</h4>\n        <md-table-container ng-if="total > 0 && !loading">\n            <table md-table md-progress="promise">\n                <thead md-head md-order="params.sort_by" md-on-reorder="sortCategories">\n                <tr md-row>\n                    <th md-column md-order-by="name">\n                        <span>Name</span>\n                        <i class="fa fa-sort" aria-hidden="true">\n                            <md-tooltip md-direction="bottom">Sort by Category name</md-tooltip>\n                        </i>\n                    </th>\n                    <th md-column >\n                        <span>Image</span>\n                    </th>\n                    <th md-column >\n                        <span>Color</span>\n                    </th>\n                </tr>\n                </thead>\n                <tbody md-body>\n                <tr md-row ng-repeat="category in categories track by $index">\n                    <td md-cell ng-bind="category.name"></td>\n                    <td md-cell>\n                        <div class="category-image">\n                            <img ng-if="category.logo" width="125" height="125" ng-src="{{category.logo}}">\n                            <img ng-if="!category.logo" width="125" height="125" src="../../../assets/images/no-image.png">\n                        </div>\n                    </td>\n                    <td md-cell>\n                        <div class="category-color">\n                            \x3c!-- <img ng-if="category.logo" width="125" height="125" ng-src="{{category.logo}}">\n                            <img ng-if="!category.logo" width="125" height="125" src="../../../assets/images/no-image.png"> --\x3e\n                            <span style="background-color: {{convertHex(category.color, 50)}}">{{category.color}}</span>\n                        </div>\n                    </td>\n                    <td md-cell text-right>\n                        <md-button class="md-accent md-hue-1 md-icon-button td-btn-edit" ng-click="openCategoryEdit(category)">\n                            <span class="icon-lic-edit" aria-hidden="true"></span>\n                            <md-tooltip md-direction="bottom">Edit</md-tooltip>\n                        </md-button>\n                        <md-button class="md-icon-button md-warn td-btn-delete" ng-disabled="category.loading"\n                                   ng-click="removeModal($event, category)">\n                            <span class="icon-lic-delete" aria-hidden="true"></span>\n                            <md-tooltip md-direction="bottom">Delete</md-tooltip>\n                        </md-button>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </md-table-container>\n        <h4 ng-show="!loading && !total && !params.search" class="text-center">Currently there are no categories in your\n            database.</h4>\n        <md-table-pagination ng-if="total > 0 && !loading"\n                             md-options="[10, 20, 30]"\n                             md-limit="params.limit"\n                             md-page="params.page"\n                             md-total="{{total}}"\n                             md-on-paginate="onPaginate"\n                             md-page-select></md-table-pagination>\n    </div>\n</div>'),t.put("/app/sections/categories/categoriesAddEdit/categoryAddEdit.html",'\x3c!-- <md-dialog aria-label="Modal" flex> --\x3e\n<div flex layout="column" >\n    <span class="table-title">\n        Category {{category.id ? \'Edit - \' + category.name : \'Add\'}}\n    </span>\n    <form name="form">\n        \x3c!-- md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2>Category {{category.id ? \'Edit - \' + category.name : \'Add\'}}</h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar> --\x3e\n        <md-content>\n            <div flex layout="column" layout-padding>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Name</label>\n                        <input ng-model="category.name" name="name" required type="text">\n                        <em class="error-message" ng-show="form.name.$error.required">Please enter category name</em>\n                    </md-input-container>\n                    <md-input-container flex>\n                        <label>Color</label>\n                        <input ng-model="category.color" name="color" required type="text">\n                        <em class="error-message" ng-show="form.name.$error.required">Please enter category color</em>\n                    </md-input-container>\n                </div>\n                <div layout="column">\n                    <h4>Category Image</h4>\n                    <div ng-if="imagePreparedForUpload" file="imagePreparedForUpload._file" width="140" height="140" ng-thumb></div>\n                    <div class="merchant-logo-container" ng-if="category.logo && !imagePreparedForUpload">\n                        <a href="#" ng-click="removeLogo()"><i class="fa fa-minus-circle" aria-hidden="true"></i></a>\n                        <img width="140" height="140" ng-src="{{category.logo}}">\n                    </div>\n                </div>\n                <input type="file" nv-file-select="" uploader="uploader" />\n            </div>\n        </md-content>\n        <section layout="row">\n            \x3c!-- <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button> --\x3e\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary" ng-disabled="form.$invalid || loading">\n                <span ng-show="loading">Please wait...</span>\n                <span ng-show="!loading && category.id"><span class="icon-lic-update btn-icon"></span> Update Category </span>\n                <span ng-show="!loading && !category.id"><span class="icon-lic-save btn-icon"></span> Add Category </span>\n            </md-button>\n        </section>\n    </form>\n</div>\n\x3c!-- </md-dialog> --\x3e'),t.put("/app/sections/categories/modals/categoryModal.html",'<md-dialog aria-label="Modal" flex>\n    <form name="form">\n        <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2>Category {{category.id ? \'Edit - \' + category.name : \'Add\'}}</h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar>\n        <md-dialog-content>\n            <div class="md-dialog-content">\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Name</label>\n                        <input ng-model="category.name" name="name" required type="text">\n                        <em class="error-message" ng-show="form.name.$error.required">Please enter category name</em>\n                    </md-input-container>\n                </div>\n                <div layout="column">\n                    <h4>Category Image</h4>\n                    <div ng-if="imagePreparedForUpload" file="imagePreparedForUpload._file" width="140" height="140" ng-thumb></div>\n                    <div class="merchant-logo-container" ng-if="category.logo && !imagePreparedForUpload">\n                        <a href="#" ng-click="removeLogo()"><i class="fa fa-minus-circle" aria-hidden="true"></i></a>\n                        <img width="140" height="140" ng-src="{{category.logo}}">\n                    </div>\n                </div>\n                <input type="file" nv-file-select="" uploader="uploader" />\n            </div>\n        </md-dialog-content>\n        <md-dialog-actions layout="row">\n            <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button>\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary" ng-disabled="form.$invalid || loading">\n                <span ng-show="loading">Please wait...</span>\n                <span ng-show="!loading && category.id">Update Category </span>\n                <span ng-show="!loading && !category.id">Add Category </span>\n            </md-button>\n        </md-dialog-actions>\n    </form>\n</md-dialog>'),t.put("/app/sections/change-password/change-password.html",'<md-content flex layout="row" layout-align="center center">\n    <div flex-sm="80" flex-gt-sm="60" layout="column" layout-padding>\n        <md-whiteframe class="md-whiteframe-1dp">\n\t\t\t\t\t\t<div flex layout="row" layout-align="center center" md-primary-color>\n\t\t\t\t\t\t\t\t<img src="../../../assets/images/logo.png" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<form name="form" layout="column" ng-if="!success">\n\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t<label>New password</label>\n\t\t\t\t\t\t\t\t\t\t<input type="password"\n\t\t\t\t\t\t\t\t\t\t\t\t\t ng-model="data.password"\n\t\t\t\t\t\t\t\t\t\t\t\t\t ng-minlength="6"\n\t\t\t\t\t\t\t\t\t\t\t\t\t required>\n\t\t\t\t\t\t\t\t\t\t<em>* minimum 6 characters long</em>\n\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t<md-input-container flex class="password-container">\n\t\t\t\t\t\t\t\t\t\t<label>Confirm password</label>\n\t\t\t\t\t\t\t\t\t\t<input type="password" ng-model="data.password_confirmation" required>\n\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t<md-button class="md-raised md-primary" type="button" ng-click="changePassword()" pull-right ng-disabled="form.$invalid || loading || (data.password != data.password_confirmation)">\n\t\t\t\t\t\t\t\t\t\t<span ng-show="!loading">Change password</span>\n\t\t\t\t\t\t\t\t\t\t<span ng-show="loading"><i class="fa fa-cog fa-spin"></i> Please wait..</span>\n\t\t\t\t\t\t\t\t</md-button>\n\t\t\t\t\t\t</form>\n            <div ng-if="!loading && success" class="text-center">\n                <h3>You have successfully changed your password!</h3>\n                <h3>Thank you!</h3>\n                <md-button class="md-raised md-primary" type="button" ui-sref="login">Login</md-button>\n            </div>\n        </md-whiteframe>\n    </div>\n</md-content>\n'),t.put("/app/sections/confirmEmail/confirmEmail.html",'<md-content flex layout="row" layout-align="center center">\n    <div flex-sm="80" flex-gt-sm="60" layout="column" layout-padding>\n        <md-whiteframe class="md-whiteframe-1dp text-center">\n            <div flex layout="row" layout-align="center center" md-primary-color>\n                <img src="../../../assets/images/logo.png" />\n            </div>\n            <div ng-if="!loading && success">\n                <h3>You have successfully confirmed your email address!</h3>\n                <h3>Thank you!</h3>\n                <md-button class="md-raised md-primary" type="button" ui-sref="login">Login</md-button>\n            </div>\n            <h3 ng-if="loading">Please wait...</h3>\n        </md-whiteframe>\n    </div>\n</md-content>\n'),t.put("/app/sections/forgot-password/forgot-password.html",'<md-content flex layout="row" layout-align="center center">\n    <div flex-sm="80" flex-gt-sm="60" layout="column">\n        <md-whiteframe class="md-whiteframe-1dp" >\n\t\t\t\t\t\t<md-content class="md-padding">\n\t\t\t\t\t\t\t\t<md-button type="button" aria-label="Back" class="md-raised" ui-sref="login">\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-chevron-left" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t</md-button>\n\t\t\t\t\t\t\t\t<form name="form" layout="column">\n\t\t\t\t\t\t\t\t\t\t<div flex layout="row" layout-align="center center" md-primary-color>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src="../../../assets/images/logo.png" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<p class="text-center">If you’ve forgotten your password, you can request a new password via email.</p>\n\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t<label>Email</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<input type="text"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t ng-model="data.email"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t required\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t ng-pattern="/^[_a-z0-9]+(\\.[_a-z0-9]+)*@[a-z0-9-]+(\\.[a-z0-9-]+)*(\\.[a-z]{2,4})$/">\n\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t<md-button class="md-raised md-primary" type="button" ng-click="forgotPassword()" pull-right ng-disabled="form.$invalid || loading">\n\t\t\t\t\t\t\t\t\t\t\t\t<span ng-show="!loading">Reset password</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span ng-show="loading"><i class="fa fa-cog fa-spin"></i> Please wait..</span>\n\t\t\t\t\t\t\t\t\t\t</md-button>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</md-content>\n        </md-whiteframe>\n    </div>\n</md-content>\n'),t.put("/app/sections/home/home.html",'<div ng-show="!loading">\n\t\t\x3c!-- <p>Welcome back {{session.first_name}} {{session.last_name}}!</p>\n\t\t<p ng-if="session.role == \'user\'">\n\t\t\t\tCurrently there are {{totals.activeCoupons}} active {{totals.activeCoupons == 1 ? \'coupon\' : \'coupons\'}} for your stores.\n\t\t</p>\n\t\t<p ng-if="session.role == \'sc-user\'">\n\t\t\t\tYou have {{totals.newMerchants}} new merchants registered in your shopping center this week. Currently there are {{totals.activeCoupons}} active coupons in your shopping center.\n\t\t</p>\n\t\t<p ng-if="session.role == \'admin\'">\n\t\t\t\tYou have {{totals.newMerchants}} new merchant accounts and {{totals.newShoppingCenters}} new shopping centers registered this week. <br></br> <br>\n\t\t\t\tCurrently there are {{totals.activeCoupons}} active coupons in system.\n\t\t</p> --\x3e\n\t\t<div layout="row" layout-align="center center">\n\t\t  <div flex class="dashboard-cards card-users" >\n\t\t    <div layout="row" class="dashboard-users ">\n\t\t    \t<div flex="66" layout="column" layout-align="start start">\n\t\t    \t\t<span class="icon-lic-users"></span>\n\t\t    \t</div>\n\t\t    \t<div class="dashboard-numbers" flex="33" layout="column" layout-align="end end">\n\t\t    \t\t<p class="number">63</p>\n\t\t\t    \t<p>Users</p>\n\t\t    \t</div>\n\t\t    </div>\n\t\t    <div layout="row" class="dashboard-users-info">\n\t\t    \tView details\n\t\t    </div>\n\t\t  </div>\n\t\t  <div flex class="dashboard-cards card-merchants">\n\t\t     <div layout="row" class="dashboard-users">\n\t\t    \t<div flex="66" layout="column" layout-align="start start">\n\t\t    \t\t<span class="icon-lic-merchants"></span>\n\t\t    \t</div>\n\t\t    \t<div class="dashboard-numbers" flex="33" layout="column" layout-align="end end">\n\t\t    \t\t<p class="number">63</p>\n\t\t\t    \t<p>Merchants</p>\n\t\t    \t</div>\n\t\t    </div>\n\t\t    <div layout="row" class="dashboard-users-info">\n\t\t    \tView details\n\t\t    </div>\n\t\t  </div>\n\t\t  <div flex class="dashboard-cards card-coupons">\n\t\t     <div  layout="row" class="dashboard-users">\n\t\t    \t<div flex="66" layout="column" layout-align="start start">\n\t\t    \t\t<span class="icon-lic-coupon"></span>\n\t\t    \t</div>\n\t\t    \t<div class="dashboard-numbers" flex="33" layout="column" layout-align="end end">\n\t\t    \t\t<p class="number">63</p>\n\t\t\t    \t<p>Coupons</p>\n\t\t    \t</div>\n\t\t    </div>\n\t\t    <div layout="row" class="dashboard-users-info">\n\t\t    \tView details\n\t\t    </div>\n\t\t  </div>\n\t\t</div>\n\n\t\t\x3c!-- Chart morris --\x3e\n\n\t\t<div flex layout="row">\n            <div class="chart-container-wrapper" layout="column" flex="66">  \n            \t<div class="chart-container">\n            \t\t<md-toolbar class="md-primary">\n\t\t\t\t    <div class="md-toolbar-tools">\n\t\t\t\t    <p>Toolbar with grouped panels (Maximum open: 2)</p>\n\t\t\t\t    <span flex></span>\n\t\t\t\t    <md-select ng-model="weapon" placeholder="Weapon" class="md-no-underline">\n\t\t\t\t        <md-option value="axe">Axe</md-option>\n\t\t\t\t        <md-option value="sword">Sword</md-option>\n\t\t\t\t\t\t<md-option value="wand">Wand</md-option>\n\t\t\t\t        <md-option value="pen">Pen?</md-option>\n\t\t\t        </md-select>\n\t\t\t\t    </div>\n\t\t\t\t</md-toolbar>\n\n\t\t\t  \t<md-content flex layout-padding>\n\t\t\t \t\t<div id="morris-area-chart"></div>\n\t\t\t  \t</md-content>\n            \t</div>\n\t\t  \t</div>\n\t\t  \t<span flex="33"></span>\n\t\t</div>\n              \n</div>\n            \x3c!-- /.row --\x3e\n<div ng-show="loading">Please wait...</div>\n\n'),t.put("/app/sections/layout/layout.html",'<div layout="row" flex>\n    <md-sidenav class="md-sidenav-left md-whiteframe-z1" md-component-id="left" md-is-locked-open="isPixieOpen() && $mdMedia(\'gt-md\')" ng-cloak>\n        <div layout="column" layout-fill flex>\n            <md-toolbar class="md-hue-3 md-whiteframe-z1" layout="row" layout-align="center center">\n                \x3c!-- <h1 class="md-toolbar-tools">LIC Admin</h1> --\x3e\n                <img src="/assets/images/logo-new.png" alt="">\n                <md-button href class="md-icon-button" ng-click="close()" hide-gt-md aria-label="Close">\n                    <i class="fa fa-angle-double-left md-title"></i>\n                </md-button>\n            </md-toolbar>\n            <md-content class="lic-sidebar" flex layout="column" layout-wrap>\n                <md-button type="button"\n                           class="md-primary sidenav-btn"\n                           ui-sref="layout.home" ui-sref-active="md-raised"><span class="icon-lic-dashboard"></span>Home</md-button>\n                <md-button type="button"\n                           class="md-primary sidenav-btn"\n                           ui-sref="layout.merchant" ui-sref-active="md-raised" ng-class="{\'md-raised\': state.name == \'layout.coupons\'}"><span class="icon-lic-merchants"></span>Merchants</md-button>\n                \x3c!--<md-button type="button"--\x3e\n                           \x3c!--ng-if="session.role == \'admin\'"--\x3e\n                           \x3c!--class="md-primary sidenav-btn"--\x3e\n                           \x3c!--ui-sref="layout.merchant-request" ui-sref-active="md-raised">Merchants Requests</md-button>--\x3e\n                <md-button type="button"\n                           class="md-primary sidenav-btn"\n                           ng-if="session.role == \'admin\'"\n                           ui-sref="layout.areas" ui-sref-active="md-raised" ng-class="{\'md-raised\': state.name == \'layout.areas-edit\'}"><span class="icon-lic-areas"></span>Areas</md-button>\n                <md-button type="button"\n                           class="md-primary sidenav-btn"\n                           ng-if="session.role == \'admin\'"\n                           ui-sref="layout.categories" ui-sref-active="md-raised" ng-class="{\'md-raised\': state.name == \'layout.categories-edit\'}"><span class="icon-lic-categories"></span>Categories</md-button>\n               \x3c!--  <md-button type="button"\n                           class="md-primary sidenav-btn"\n                           ng-if="session.role == \'admin\' || session.role == \'sc-user\'"\n                           ui-sref="layout.shopping-centers" ui-sref-active="md-raised">Shopping Centers</md-button> --\x3e\n                <md-button type="button"\n                           ng-if="session.role == \'admin\'"\n                           class="md-primary sidenav-btn"\n                           ui-sref="layout.users" ui-sref-active="md-raised" ng-class="{\'md-raised\': (state.name == \'layout.user-edit\' || state.name == \'layout.password-change\')}"><span class="icon-lic-users"></span>Users</md-button>\n                <md-button type="button"\n                           class="md-primary sidenav-btn"\n                           ui-sref="layout.push-notification" ui-sref-active="md-raised"><span class="icon-lic-notifications"></span>Push notification</md-button>\n                <md-button type="button"\n                           class="md-primary sidenav-btn"\n                           ui-sref="layout.settings" ui-sref-active="md-raised"><span class="icon-lic-settings"></span>Settings</md-button>\n            </md-content>\n        </div>\n    </md-sidenav>\n    <div layout="column" flex>\n        <md-toolbar id="blue-lic-toolbar" class="md-hue-2 site-content-toolbar md-whiteframe-z1" layout="row" layout-align="start center" ng-cloak>\n            <div class="md-toolbar-tools docs-toolbar-tools" flex>\n                <md-button href class="md-icon-button" ng-click="toggle()" hide-gt-md aria-label="Close">\n                    <i class="fa fa-bars"></i>\n                </md-button>\n                <div layout="row" flex>\n                    <div flex layout="column" layout-align="center start">\n                        <a class="back-button" ng-if="isBackActive" ng-click="onBack()">\n                          <span class="icon-lic-back"></span>\n                          Back\n                        </a>\n                    </div>\n                    <div flex="22" layout="column" layout-align="center end">\n                        <md-menu class="site-content-toolbar-button normal-case fill-height" md-position-mode="target-right target">\n                            <md-button aria-label="Open phone interactions menu" ng-click="openMenu($mdOpenMenu, $event)">\n                                {{user.first_name}} {{user.last_name}} <i class="fa fa-caret-down" aria-hidden="true"></i>\n                            </md-button>\n                            <md-menu-content width="1">\n                                <md-menu-item>\n                                    <md-button ng-click="profileModal($event)">\n                                        <i class="fa fa-user" aria-hidden="true"></i> Profile\n                                    </md-button>\n                                </md-menu-item>\n                                <md-menu-item>\n                                    <md-button ng-click="logout()">\n                                        <i class="fa fa-power-off" aria-hidden="true"></i> Logout\n                                    </md-button>\n                                </md-menu-item>\n                            </md-menu-content>\n                        </md-menu>\n                    </div>\n                </div>\n            </div>\n        </md-toolbar>\n        <md-content layout-padding class="md-sidenav-left md-whiteframe-z1" ui-view layout="column" flex overflow-x="hidden"></md-content>\n    </div>\n</div>\n'),t.put("/app/sections/login/login.html",'<md-content flex layout="row" layout-align="center center">\n    <div flex-sm="80" flex-gt-sm="60" layout="column">\n        <md-whiteframe class="md-whiteframe-1dp" >\n\t\t\t\t\t\t<md-content class="md-padding">\n\t\t\t\t\t\t\t\t<form name="form" layout="column">\n\t\t\t\t\t\t\t\t\t\t<div flex layout="row" layout-align="center center" md-primary-color>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src="cms/assets/images/logo.png" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t<label>Email</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<input type="text"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t ng-model="user.email"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t required\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t ng-pattern="/^[_a-z0-9]+(\\.[_a-z0-9]+)*@[a-z0-9-]+(\\.[a-z0-9-]+)*(\\.[a-z]{2,4})$/">\n\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t<md-input-container flex class="password-container">\n\t\t\t\t\t\t\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<input type="password" ng-model="user.password" required>\n\t\t\t\t\t\t\t\t\t\t\t\t<a href="#" aria-label="Forgot password" class="pull-right" ui-sref="forgot-password">Forgot password?</a>\n\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t<md-button class="md-raised md-primary" type="button" ng-click="login()" pull-right ng-disabled="form.$invalid || loading">\n\t\t\t\t\t\t\t\t\t\t\t\t<span ng-show="!loading">Login</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span ng-show="loading"><i class="fa fa-cog fa-spin"></i> Please wait..</span>\n\t\t\t\t\t\t\t\t\t\t</md-button>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</md-content>\n        </md-whiteframe>\n    </div>\n</md-content>\n'),t.put("/app/sections/merchant/addEditMerchant/merchantAddEdit.html",'\x3c!-- <md-dialog aria-label="Modal" flex> --\x3e\n<div flex layout="column" >\n    <span ng-bind="merchant.id ? \'Edit Merchant\' : \'Add Merchant\'" class="padding-bottom table-title">\n    </span>\n    <form name="form">\n        \x3c!-- <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2 ng-bind="merchant.id ? \'Edit Merchant\' : \'Add Merchant\'"></h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar> --\x3e\n        <md-content flex layout="column" layout-padding>\n            <div layout="column">\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Name</label>\n                        <input name="name" ng-model="merchant.name" required type="text">\n                        <em class="error-message" ng-show="form.name.$error.required">Enter merchant name</em>\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Description</label>\n                        <textarea name="description" minlength="3" required ng-model="merchant.description" rows="5" md-select-on-focus></textarea>\n                        <em class="error-message" ng-show="form.description.$error.required">Please enter description</em>\n                        <em class="error-message" ng-show="form.description.$error.minlength">Description must be at least 3 characters long</em>\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <div flex>\n                        <md-autocomplete md-input-name="area" md-selected-item="selectedArea" md-search-text="searchAreaText" md-selected-item-change="selectArea(area)" required md-items="area in loadArea(searchAreaText)" md-item-text="area.name" md-require-match md-delay="300" md-min-length="0" md-floating-label="Area">\n                            <md-item-template>\n                                <span md-highlight-text="searchAreaText">{{area.name}}</span>\n                            </md-item-template>\n                            <md-not-found>\n                                No states matching "{{searchAreaText}}" were found.\n                            </md-not-found>\n                            <em class="error-message" ng-show="form.area.$error.required">Please select area</em>\n                        </md-autocomplete>\n                    </div>\n                    <div flex>\n                        <md-autocomplete md-selected-item="selectedShoppingCenter" md-no-cache="true" md-search-text="searchTextShoppingCenter" md-selected-item-change="selectShoppingCenter(shoppingCenter)" md-items="shoppingCenter in loadShoppingCenters(searchTextShoppingCenter)" md-item-text="shoppingCenter.name" md-require-match md-delay="300" md-min-length="0" md-floating-label="Shopping Center">\n                            <md-item-template>\n                                <span md-highlight-text="searchTextShoppingCenter">{{shoppingCenter.name}}</span>\n                            </md-item-template>\n                            <md-not-found>\n                                No states matching "{{searchTextShoppingCenter}}" were found.\n                            </md-not-found>\n                        </md-autocomplete>\n                    </div>\n                </div>\n                <div layout="row">\n                    <md-input-container flex ng-if="!merchant.shopping_center_id">\n                        <label>Shopping Center Name</label>\n                        <input name="shopping_center_name" ng-model="merchant.shopping_center_name" ng-required="!merchant.shopping_center_id || !shoppingCenter.lat || !shoppingCenter.lon" type="text">\n                        <em class="error-message" ng-show="form.shopping_center_name.$error.required">Required if shopping center is not selected</em>\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Zip</label>\n                        <input ng-model="merchant.zip" name="zip" ng-change="geoLocationByZip(merchant.zip)" ng-required="!merchant.shopping_center_id" type="text">\n                        <em class="error-message" ng-show="form.zip.$error.required">Please enter ZIP code</em>\n                    </md-input-container>\n                    <div layout="row">\n                        <md-input-container flex>\n                            <label>Address</label>\n                            <input name="address" ng-model="merchant.address" ng-required="!merchant.shopping_center_id" ng-disabled="loadingByZip" type="text">\n                            <em class="error-message" ng-show="form.address.$error.required">Please enter address</em>\n                        </md-input-container>\n                        <md-input-container flex>\n                            <label>Suite number</label>\n                            <input name="suite_number" ng-model="merchant.suite_number" ng-required="!merchant.address" ng-disabled="loadingByZip" type="text">\n                            <em class="error-message" ng-show="form.suite_number.$error.required">Please enter suite number</em>\n                        </md-input-container>\n                    </div>\n                    <md-input-container flex>\n                        <label>City</label>\n                        <input ng-model="merchant.city" name="city" ng-required="!merchant.shopping_center_id" ng-disabled="loadingByZip" required type="text">\n                        <em class="error-message" ng-show="form.city.$error.required">Please enter city name</em>\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Latitude</label>\n                        <input name="lat" ng-model="merchant.lat" required ng-disabled="loadingByZip" type="number" step="any">\n                        <em class="error-message" ng-show="form.lat.$error.required">Please enter latitude</em>\n                    </md-input-container>\n                    <md-input-container flex>\n                        <label>Longitude</label>\n                        <input name="lon" ng-model="merchant.lon" required ng-disabled="loadingByZip" type="number" step="any">\n                        <em class="error-message" ng-show="form.lon.$error.required">Please enter Longitude</em>\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Phone</label>\n                        <input ng-model="merchant.phone" type="text">\n                    </md-input-container>\n                    <md-input-container flex>\n                        <label>Website</label>\n                        <input ng-model="merchant.website" type="text">\n                        <em>* http://www.example.com</em>\n                    </md-input-container>\n                </div>\n                <div layout="column">\n                    <md-input-container flex md-no-float>\n                        <label></label>\n                        <tags-input ng-model="merchant.categories" replaces-spaces-with-dashes="false" aria-label="Category" placeholder="Add Category" debounce-delay="100" key-property="id" display-property="name" add-from-autocomplete-only="true" max-results-to-show="10">\n                            <auto-complete source="loadCategories($query)" aria-label="Category" load-on-focus="true" load-on-empty="true" min-length="0" debounce-delay="100"></auto-complete>\n                        </tags-input>\n                        <em ng-if="categoryLoading">Please wait...</em>\n                    </md-input-container>\n                </div>\n                <div layout="column">\n                    <h4>Merchant Logo</h4>\n                    <div ng-if="imagePreparedForUpload" file="imagePreparedForUpload._file" width="140" height="140" ng-thumb></div>\n                    <div class="merchant-logo-container" ng-if="merchant.logo && !imagePreparedForUpload">\n                        <a href="#" ng-click="removeLogo()"><i class="fa fa-minus-circle" aria-hidden="true"></i></a>\n                        <img width="140" height="140" ng-src="{{merchant.logo}}">\n                    </div>\n                </div>\n                <input type="file" nv-file-select="" uploader="uploader" />\n            </div>\n        </md-content>\n        <section layout="row">\n            \x3c!-- <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button> --\x3e\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary" ng-disabled="form.$invalid || loading">\n                <span ng-show="!loading && !merchant.id"><span class="icon-lic-save btn-icon"></span> Save</span>\n                <span ng-show="!loading && merchant.id"><span class="icon-lic-update btn-icon"></span> Update</span>\n                <span ng-show="loading">Please wait...</span>\n            </md-button>\n        </section>\n    </form>\n</div>\n\x3c!-- </md-dialog> --\x3e\n'),t.put("/app/sections/merchant/coupon/coupon.html",'<div>\n    <h4 ng-if="loading" class="text-center">Please wait...</h4>\n    <div layout="column" ng-if="!loading">\n        <span class="table-title">Coupons for {{merchant.name}}</span>\n        <div layout="row">\n\t\t\t\t\t\t\x3c!-- <md-input-container>\n\t\t\t\t\t\t\t\t<md-button class="md-raised" aria-label="back" ng-click="goBack()">\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-arrow-left" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t</md-button>\n\t\t\t\t\t\t</md-input-container> --\x3e\n\t\t\t\t\t\t<md-input-container class="sort-by-container-fix">\n\t\t\t\t\t\t\t\t<label>Sort by</label>\n\t\t\t\t\t\t\t\t<md-select ng-change="sortBy()" ng-model="params.sort_by">\n\t\t\t\t\t\t\t\t\t\t<md-option value="-active">Active State</md-option>\n\t\t\t\t\t\t\t\t\t\t<md-option value="active">Inactive State</md-option>\n\t\t\t\t\t\t\t\t\t\t<md-option value="start_date">Date Start</md-option>\n\t\t\t\t\t\t\t\t\t\t<md-option value="end_date">Date End</md-option>\n\t\t\t\t\t\t\t\t</md-select>\n\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t<md-input-container class="padd">\n\t\t\t\t\t\t\t\t<md-button class="md-raised md-primary" ng-click="openCouponModal()" aria-label="Add Coupon">\n\t\t\t\t\t\t\t\t\t\t<span class="icon-lic-add btn-icon"></span> Add Coupon\n\t\t\t\t\t\t\t\t</md-button>\n\t\t\t\t\t\t</md-input-container>\n                        <md-input-container class="padd">\n                                <md-button class="md-raised md-primary" ng-click="openPixieEditor()" aria-label="Create Coupon">\n                                       <span class="icon-lic-magic btn-icon"></span> Create Coupon\n                                </md-button>\n                        </md-input-container>\n        </div>\n    </div>\n    <div class="md-padding" layout="row" layout-wrap ng-if="!loading">\n        <md-card class="coupon-card-shadow" md-theme="default" md-theme-watch ng-repeat="coupon in coupons">\n            <md-card-title>\n                <md-card-title-text>\n                    <span class="md-headline">Title: {{coupon.title}}</span>\n\t\t\t\t\t\t\t\t\t\t<span class="md-subhead">\n\t\t\t\t\t\t\t\t\t\t\t\tDate: {{coupon.start_date}} - {{coupon.end_date}}\n\t\t\t\t\t\t\t\t\t\t\t\t<p class="fix-margin">Status: {{coupon.active ? \'Active\': \'Inactive\'}}</p>\n\t\t\t\t\t\t\t\t\t\t</span>\n                    <div layout="row" style="width:300px">{{coupon.description}}</div>\n                </md-card-title-text>\n                <md-card-title-media>\n                    <div class="md-media-md card-media">\n                        \x3c!-- <i ng-if="!coupon.image.url" class="fa fa-picture-o" aria-hidden="true"></i> --\x3e\n                        <span ng-if="!coupon.image.url" class="icon-lic-image" aria-hidden="true"></span>\n                        <img ng-if="coupon.image.url" ng-src="{{coupon.image.url}}" />\n                    </div>\n                </md-card-title-media>\n            </md-card-title>\n            <md-card-actions layout="row" layout-align="end center">\n                <md-button class="edit-color"\n                           ng-click="openCouponModal($event, coupon)"\n                           ng-disabled="coupon.toggleLoading">\n                    <span class="icon-lic-edit btn-icon"></span> Edit\n                </md-button>\n                <md-button ng-class="{\'active-color\': !coupon.active}" ng-disabled="coupon.toggleLoading" ng-click="toggleActive(coupon)">\n                    <span ng-show="coupon.toggleLoading"><i class="fa fa-cog fa-spin"></i> Please wait...</span>\n                    <span class="inactive-color" ng-show="coupon.active && !coupon.toggleLoading">\n                        <span class="icon-lic-inactive btn-icon"></span> Deactivate\n                    </span>\n                    <span ng-show="!coupon.active && !coupon.toggleLoading">\n                        <span class="icon-lic-active btn-icon"></span> Activate\n                    </span>\n                </md-button>\n                <md-button class="delete-color"\n                           ng-click="removeModal($event, coupon)"\n                           ng-disabled="coupon.toggleLoading || coupon.deleteLoading">\n                    <span ng-show="coupon.deleteLoading"><i class="fa fa-cog fa-spin"></i> Please wait...</span>\n                    <span ng-show="!coupon.deleteLoading">\n                        <span class="icon-lic-delete btn-icon"></span> Delete\n                    </span>\n                </md-button>\n            </md-card-actions>\n        </md-card>\n    </div>\n    <h4 ng-show="!loading && !total && !params.search" class="text-center">Currently there no coupones in your database for {{merchant.name}}.</h4>\n    <md-table-pagination ng-if="total > 0"\n                         md-options="[10, 20, 30]"\n                         md-limit="params.limit"\n                         md-page="params.page"\n                         md-total="{{total}}"\n                         md-on-paginate="onPaginate"\n                         md-page-select></md-table-pagination>\n</div>\n'),t.put("/app/sections/merchant/coupon/modals/couponModal.html",'<md-dialog aria-label="Modal" flex>\n    <form name="form">\n        <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2 ng-bind="coupon.id ? \'Edit Coupon\' : \'Add Coupon\'"></h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar>\n        <md-dialog-content>\n            <div class="md-dialog-content">\n                <md-tabs md-dynamic-height md-border-bottom md-stretch-tabs="always">\n                    <md-tab label="Details">\n                        <md-content class="md-padding">\n                            <div layout="column">\n                                <md-input-container flex>\n                                    <label>Title</label>\n                                    <input ng-model="coupon.title" required type="text">\n                                </md-input-container>\n                                <md-input-container flex>\n                                    <label>Description</label>\n                                    <textarea maxlength="200" ng-model="coupon.description" required rows="3" md-select-on-focus></textarea>\n                                    <em pull-right>{{coupon.description.length ? coupon.description.length : 0}}/200</em>\n                                </md-input-container>\n                            </div>\n                            <div layout="row">\n                                <md-input-container flex>\n                                    <label>Start Date</label>\n                                    <md-datepicker ng-model="coupon.start_date"\n                                                   md-placeholder="Start Date"\n                                                   md-open-on-focus></md-datepicker>\n                                </md-input-container>\n                                <md-input-container flex>\n                                    <label>End Date</label>\n                                    <md-datepicker ng-model="coupon.end_date"\n                                                   md-placeholder="End Date"\n                                                   md-open-on-focus></md-datepicker>\n                                </md-input-container>\n                            </div>\n                        </md-content>\n                    </md-tab>\n                    <md-tab label="Files">\n                        <md-content class="md-padding">\n                            <div layout="column">\n                                <br />\n                                <div ng-show="uploader.isHTML5" style="padding: 20px;" nv-file-drop class="my-drop-zone" nv-file-over="" uploader="uploader">\n                                    <span class="drag-img"></span>\n                                    <span class="drag-text"> Drag & drop files here</span>\n                                </div>\n                                <input ng-show="!uploader.isHTML5" type="file" nv-file-select="" uploader="uploader" multiple /><br />\n                                <em class="text-right">* only PDF and images are allowed</em>\n                                <br />\n\n                                <div layout="row" flex ng-show="uploader.queue.length > 0">\n                                    <table md-table class="table">\n                                        <thead md-head>\n                                            <tr md-row>\n                                                <th md-column width="50%">Name</th>\n                                                <th md-column ng-show="uploader.isHTML5">Size</th>\n                                                <th md-column ng-show="uploader.isHTML5">Progress</th>\n                                                <th md-column>Status</th>\n                                                <th md-column>Actions</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody md-body>\n                                            <tr md-row ng-repeat="item in uploader.queue">\n                                                <td md-cell><strong>{{ item.file.name }}</strong></td>\n                                                <td md-cell ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td>\n                                                <td md-cell ng-show="uploader.isHTML5">\n                                                    <div class="progress" style="margin-bottom: 0;">\n                                                        <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div>\n                                                    </div>\n                                                </td>\n                                                <td md-cell class="text-center">\n                                                    <span ng-show="item.isSuccess"><i class="fa fa-check" aria-hidden="true"></i></span>\n                                                    <span ng-show="item.isCancel"><i class="fa fa-ban" aria-hidden="true"></i></span>\n                                                    <span ng-show="item.isError"><i class="fa fa-exclamation" aria-hidden="true"></i></span>\n                                                </td>\n                                                <td md-cell nowrap>\n                                                    <md-button type="button" aria-label="Delete" class="md-raised" ng-click="item.remove()">\n                                                        <i class="fa fa-trash" aria-hidden="true"></i>\n                                                    </md-button>\n                                                </td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                    <div>\n                                        <div>\n                                            <md-progress-linear md-mode="determinate" value="{{uploader.progress}}"></md-progress-linear>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div ng-if="coupon.files.length">\n                                    <span>Files:</span>\n                                    <div layout="row">\n                                        <md-card md-theme="default" ng-repeat="file in coupon.files" md-theme-watch>\n                                            <a href="{{file.url}}" target="_blank">\n                                                <img ng-if="file.extension != \'pdf\' && file.extension != \'txt\'" layout-padding ng-src="{{file.url}}" alt="Image" style="height: 200px; width: 200px;" />\n                                                <div ng-if="file.extension == \'pdf\' || file.extension == \'txt\'" layout-padding style="height: 200px; width: 200px;" class="text-center">\n                                                    <i class="fa fa-file-text-o fa-5x" aria-hidden="true"></i>\n                                                </div>\n                                            </a>\n                                            <md-card-actions layout="row" layout-align="end center">\n                                                <md-button ng-click="removeFile(file)">\n                                                    <span ng-show="!file.loading">Delete</span>\n                                                    <span ng-show="file.loading">Please wait...</span>\n                                                </md-button>\n                                            </md-card-actions>\n                                        </md-card>\n                                    </div>\n                                </div>\n                            </div>\n                        </md-content>\n                    </md-tab>\n                </md-tabs>\n            </div>\n        </md-dialog-content>\n        <md-dialog-actions layout="row">\n            <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button>\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary" ng-disabled="form.$invalid || loading">\n                <span ng-show="!loading">Save</span>\n                <span ng-show="loading"><i class="fa fa-cog fa-spin"></i> Please wait...</span>\n            </md-button>\n        </md-dialog-actions>\n    </form>\n</md-dialog>\n'),t.put("/app/sections/merchant/coupon/pixieModals/detailsModal.html",'<md-dialog id="details-modal" aria-label="Modal" flex>\n    <form name="form">\n        <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2 ng-bind="coupon.id ? \'Edit Coupon\' : \'Add Coupon\'"></h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar>\n        <md-dialog-content>\n            <div class="md-dialog-content">\n                <md-tabs md-dynamic-height md-border-bottom md-stretch-tabs="always">\n                    <md-tab label="Details">\n                        <md-content class="md-padding">\n                            <div layout="column">\n                                <md-input-container flex>\n                                    <label>Title</label>\n                                    <input ng-model="coupon.title" required type="text">\n                                </md-input-container>\n                                <md-input-container flex>\n                                    <label>Description</label>\n                                    <textarea maxlength="200" ng-model="coupon.description" required rows="3" md-select-on-focus></textarea>\n                                    <em pull-right>{{coupon.description.length ? coupon.description.length : 0}}/200</em>\n                                </md-input-container>\n                            </div>\n                            <div layout="row">\n                                <md-input-container flex>\n                                    <label>Start Date</label>\n                                    <md-datepicker ng-model="coupon.start_date"\n                                                   md-placeholder="Start Date"\n                                                   md-open-on-focus></md-datepicker>\n                                </md-input-container>\n                                <md-input-container flex>\n                                    <label>End Date</label>\n                                    <md-datepicker ng-model="coupon.end_date"\n                                                   md-placeholder="End Date"\n                                                   md-open-on-focus></md-datepicker>\n                                </md-input-container>\n                            </div>\n                        </md-content>\n                    </md-tab>\n                </md-tabs>\n            </div>\n        </md-dialog-content>\n        <md-dialog-actions layout="row">\n            <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button>\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary" ng-disabled="form.$invalid || loading">\n                <span ng-show="!loading">Save</span>\n                <span ng-show="loading"><i class="fa fa-cog fa-spin"></i> Please wait...</span>\n            </md-button>\n        </md-dialog-actions>\n    </form>\n</md-dialog>'),t.put("/app/sections/merchant/coupon/pixieModals/modals/detailsModal.html",'<md-dialog aria-label="Modal" flex>\n    <form name="form">\n        <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2 ng-bind="coupon.id ? \'Edit Coupon\' : \'Add Coupon\'"></h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar>\n        <md-dialog-content>\n            <div class="md-dialog-content">\n                <md-tabs md-dynamic-height md-border-bottom md-stretch-tabs="always">\n                    <md-tab label="Details">\n                        <md-content class="md-padding">\n                            <div layout="column">\n                                <md-input-container flex>\n                                    <label>Title</label>\n                                    <input ng-model="coupon.title" required type="text">\n                                </md-input-container>\n                                <md-input-container flex>\n                                    <label>Description</label>\n                                    <textarea maxlength="200" ng-model="coupon.description" required rows="3" md-select-on-focus></textarea>\n                                    <em pull-right>{{coupon.description.length ? coupon.description.length : 0}}/200</em>\n                                </md-input-container>\n                            </div>\n                            <div layout="row">\n                                <md-input-container flex>\n                                    <label>Start Date</label>\n                                    <md-datepicker ng-model="coupon.start_date"\n                                                   md-placeholder="Start Date"\n                                                   md-open-on-focus></md-datepicker>\n                                </md-input-container>\n                                <md-input-container flex>\n                                    <label>End Date</label>\n                                    <md-datepicker ng-model="coupon.end_date"\n                                                   md-placeholder="End Date"\n                                                   md-open-on-focus></md-datepicker>\n                                </md-input-container>\n                            </div>\n                        </md-content>\n                    </md-tab>\n                </md-tabs>\n            </div>\n        </md-dialog-content>\n        <md-dialog-actions layout="row">\n            <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button>\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary" ng-disabled="form.$invalid || loading">\n                <span ng-show="!loading">Save</span>\n                <span ng-show="loading"><i class="fa fa-cog fa-spin"></i> Please wait...</span>\n            </md-button>\n        </md-dialog-actions>\n    </form>\n</md-dialog>'),t.put("/app/sections/merchant/coupon/pixieModals/pixieModal.html",'<md-input-container>\n    <md-button class="md-raised" aria-label="back" ng-click="goBack()">\n        <i class="fa fa-arrow-left" aria-hidden="true"></i>\n    </md-button>\n</md-input-container>\n\x3c!-- <md-dialog style="width: 100%; height: 100%; margin: auto" aria-label="Modal" flex> --\x3e\n<pixie-editor id="pixie-id">\n    <div class="global-spinner">\n        <style>\n        .global-spinner {\n            display: none;\n            align-items: center;\n            justify-content: center;\n            z-index: 999;\n            background: #fff;\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n        }\n        </style>\n        <style>\n        .la-ball-spin-clockwise,\n        .la-ball-spin-clockwise>div {\n            position: relative;\n            -webkit-box-sizing: border-box;\n            -moz-box-sizing: border-box;\n            box-sizing: border-box\n        }\n\n        .la-ball-spin-clockwise {\n            display: block;\n            font-size: 0;\n            color: #1976d2\n        }\n\n        .la-ball-spin-clockwise.la-dark {\n            color: #333\n        }\n\n        .la-ball-spin-clockwise>div {\n            display: inline-block;\n            float: none;\n            background-color: currentColor;\n            border: 0 solid currentColor\n        }\n\n        .la-ball-spin-clockwise {\n            width: 32px;\n            height: 32px\n        }\n\n        .la-ball-spin-clockwise>div {\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            width: 8px;\n            height: 8px;\n            margin-top: -4px;\n            margin-left: -4px;\n            border-radius: 100%;\n            -webkit-animation: ball-spin-clockwise 1s infinite ease-in-out;\n            -moz-animation: ball-spin-clockwise 1s infinite ease-in-out;\n            -o-animation: ball-spin-clockwise 1s infinite ease-in-out;\n            animation: ball-spin-clockwise 1s infinite ease-in-out\n        }\n\n        .la-ball-spin-clockwise>div:nth-child(1) {\n            top: 5%;\n            left: 50%;\n            -webkit-animation-delay: -.875s;\n            -moz-animation-delay: -.875s;\n            -o-animation-delay: -.875s;\n            animation-delay: -.875s\n        }\n\n        .la-ball-spin-clockwise>div:nth-child(2) {\n            top: 18.1801948466%;\n            left: 81.8198051534%;\n            -webkit-animation-delay: -.75s;\n            -moz-animation-delay: -.75s;\n            -o-animation-delay: -.75s;\n            animation-delay: -.75s\n        }\n\n        .la-ball-spin-clockwise>div:nth-child(3) {\n            top: 50%;\n            left: 95%;\n            -webkit-animation-delay: -.625s;\n            -moz-animation-delay: -.625s;\n            -o-animation-delay: -.625s;\n            animation-delay: -.625s\n        }\n\n        .la-ball-spin-clockwise>div:nth-child(4) {\n            top: 81.8198051534%;\n            left: 81.8198051534%;\n            -webkit-animation-delay: -.5s;\n            -moz-animation-delay: -.5s;\n            -o-animation-delay: -.5s;\n            animation-delay: -.5s\n        }\n\n        .la-ball-spin-clockwise>div:nth-child(5) {\n            top: 94.9999999966%;\n            left: 50.0000000005%;\n            -webkit-animation-delay: -.375s;\n            -moz-animation-delay: -.375s;\n            -o-animation-delay: -.375s;\n            animation-delay: -.375s\n        }\n\n        .la-ball-spin-clockwise>div:nth-child(6) {\n            top: 81.8198046966%;\n            left: 18.1801949248%;\n            -webkit-animation-delay: -.25s;\n            -moz-animation-delay: -.25s;\n            -o-animation-delay: -.25s;\n            animation-delay: -.25s\n        }\n\n        .la-ball-spin-clockwise>div:nth-child(7) {\n            top: 49.9999750815%;\n            left: 5.0000051215%;\n            -webkit-animation-delay: -.125s;\n            -moz-animation-delay: -.125s;\n            -o-animation-delay: -.125s;\n            animation-delay: -.125s\n        }\n\n        .la-ball-spin-clockwise>div:nth-child(8) {\n            top: 18.179464974%;\n            left: 18.1803700518%;\n            -webkit-animation-delay: 0s;\n            -moz-animation-delay: 0s;\n            -o-animation-delay: 0s;\n            animation-delay: 0s\n        }\n\n        .la-ball-spin-clockwise.la-sm {\n            width: 16px;\n            height: 16px\n        }\n\n        .la-ball-spin-clockwise.la-sm>div {\n            width: 4px;\n            height: 4px;\n            margin-top: -2px;\n            margin-left: -2px\n        }\n\n        .la-ball-spin-clockwise.la-2x {\n            width: 64px;\n            height: 64px\n        }\n\n        .la-ball-spin-clockwise.la-2x>div {\n            width: 16px;\n            height: 16px;\n            margin-top: -8px;\n            margin-left: -8px\n        }\n\n        .la-ball-spin-clockwise.la-3x {\n            width: 96px;\n            height: 96px\n        }\n\n        .la-ball-spin-clockwise.la-3x>div {\n            width: 24px;\n            height: 24px;\n            margin-top: -12px;\n            margin-left: -12px\n        }\n\n        @-webkit-keyframes ball-spin-clockwise {\n            0%,\n            100% {\n                opacity: 1;\n                -webkit-transform: scale(1);\n                transform: scale(1)\n            }\n            20% {\n                opacity: 1\n            }\n            80% {\n                opacity: 0;\n                -webkit-transform: scale(0);\n                transform: scale(0)\n            }\n        }\n\n        @-moz-keyframes ball-spin-clockwise {\n            0%,\n            100% {\n                opacity: 1;\n                -moz-transform: scale(1);\n                transform: scale(1)\n            }\n            20% {\n                opacity: 1\n            }\n            80% {\n                opacity: 0;\n                -moz-transform: scale(0);\n                transform: scale(0)\n            }\n        }\n\n        @-o-keyframes ball-spin-clockwise {\n            0%,\n            100% {\n                opacity: 1;\n                -o-transform: scale(1);\n                transform: scale(1)\n            }\n            20% {\n                opacity: 1\n            }\n            80% {\n                opacity: 0;\n                -o-transform: scale(0);\n                transform: scale(0)\n            }\n        }\n\n        @keyframes ball-spin-clockwise {\n            0%,\n            100% {\n                opacity: 1;\n                -webkit-transform: scale(1);\n                -moz-transform: scale(1);\n                -o-transform: scale(1);\n                transform: scale(1)\n            }\n            20% {\n                opacity: 1\n            }\n            80% {\n                opacity: 0;\n                -webkit-transform: scale(0);\n                -moz-transform: scale(0);\n                -o-transform: scale(0);\n                transform: scale(0)\n            }\n        }\n        </style>\n        <div class="la-ball-spin-clockwise la-2x">\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n        </div>\n    </div>\n    <script>\n    setTimeout(function() {\n        var spinner = document.querySelector(\'.global-spinner\');\n        if (spinner) spinner.style.display = \'flex\';\n    }, 50);\n    <\/script>\n</pixie-editor>\n\x3c!-- </md-dialog> --\x3e'),t.put("/app/sections/merchant/merchant.html",'<div>\n    <div layout="column">\n        <span class="table-title padding-bottom">\n            \x3c!-- <i class="fa fa-database" aria-hidden="true"></i> --\x3e\n             Merchants in DB</span>\n        <form novalidate flex layout="row" ng-submit="search()">\n            <md-input-container class="filter-by-container-fix">\n                <label>Categories</label>\n                <md-select ng-change="selectFilter()" ng-model="filters" multiple>\n                    <md-option ng-repeat="category in categories" value="{{category.id}}">{{category.name}}</md-option>\n                </md-select>\n                <em ng-if="categoryLoading">Please wait...</em>\n            </md-input-container>\n            <md-input-container flex>\n                <label>Search</label>\n                <input type="text" autocomplete="off" ng-disabled="!total && !params.search" ng-model="params.search" ng-change="search()">\n            </md-input-container>\n           \x3c!--  <md-button class="md-fab md-mini" type="submit" ng-disabled="!total && !params.search" aria-label="Search">\n                <i class="fa fa-search"></i>\n            </md-button> --\x3e\n            <md-input-container class="no">\n                <md-button class="md-raised md-primary" type="button" ng-click="openMerchantAdd()" aria-label="Add">\n                    <span class="icon-lic-add btn-icon"></span>Add New Merchant\n                </md-button>\n            </md-input-container>\n        </form>\n    </div>\n    <md-table-container ng-if="total > 0 && !loading">\n        <table md-table>\n            <thead md-head md-order="params.sort_by" md-on-reorder="sortMerchants">\n                <tr md-row>\n                    <th md-column md-order-by="id">\n                        <span>No.</span>\n                        <i class="fa fa-sort" aria-hidden="true">\n                            <md-tooltip md-direction="bottom">Sort by Number</md-tooltip>\n                        </i>\n                    </th>\n                    <th md-column md-order-by="name">\n                        <span>Name</span>\n                        <i class="fa fa-sort" aria-hidden="true">\n                            <md-tooltip md-direction="bottom">Sort by Name</md-tooltip>\n                         </i>\n                    </th>\n                    <th md-column>Stores</th>\n                    <th md-column>Coupons</th>\n                    <th md-column md-order-by="shopping_center_name">\n                        <span>Shopping Center</span>\n                        <i class="fa fa-sort" aria-hidden="true">\n                            <md-tooltip md-direction="bottom">Sort by Shopping center name</md-tooltip>\n                        </i>\n                    </th>\n                    <th md-column></th>\n                </tr>\n            </thead>\n            <tbody md-body>\n                <tr md-row ng-repeat="merchant in merchants track by $index">\n                    <td md-cell ng-bind="merchant.id"></td>\n                    <td md-cell ng-bind="merchant.name"></td>\n                    <td md-cell ng-bind="merchant.stores"></td>\n                    <td md-cell ng-bind="merchant.coupons"></td>\n                    <td md-cell ng-bind="merchant.shopping_center_name ? merchant.shopping_center_name : \'-\'"></td>\n                    <td md-cell text-right>\n                        <md-button aria-label="Coupons" class="md-primary md-icon-button td-btn-coupon" ui-sref="layout.coupons({merchantId: merchant.id})">\n                            <span class="icon-lic-coupon" aria-hidden="true"></span>\n                            <md-tooltip md-direction="bottom">Coupons</md-tooltip>\n                        </md-button>\n                        <md-button aria-label="Edit" class="md-accent md-hue-1 md-icon-button td-btn-edit" ng-click="openMerchantEdit(merchant)">\n                            <span class="icon-lic-edit" aria-hidden="true"></span>\n                            <md-tooltip md-direction="bottom">Edit</md-tooltip>\n                        </md-button>\n                        <md-button aria-label="Remove" class="md-icon-button md-warn td-btn-delete" ng-click="removeModal($event, merchant)">\n                            <span class="icon-lic-delete" aria-hidden="true"></span>\n                            <md-tooltip md-direction="bottom">Delete</md-tooltip>\n                        </md-button>\n                       \x3c!--  <md-button aria-label="Notification" class="md-raised md-accent md-hue-1" ng-click="sendNotification($event, merchant)">\n                            <i class="fa fa-bell-o" aria-hidden="true"></i>\n                            <md-tooltip md-direction="bottom">Notification</md-tooltip>\n                        </md-button> --\x3e\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </md-table-container>\n    <h4 ng-show="!loading && !total && !params.search" class="text-center">Currently there are no merchants in your database.</h4>\n    <h4 ng-show="params.search && total == 0" class="text-center">Currently there are no results that match search criterium.</h4>\n    <h4 ng-show="loading" class="text-center">Please wait...</h4>\n    <md-table-pagination ng-if="total > 0 && !loading" md-options="[10, 20, 30]" md-limit="params.limit" md-page="params.page"\n        md-total="{{total}}" md-on-paginate="onPaginate" md-page-select></md-table-pagination>\n</div>'),t.put("/app/sections/merchant/modals/merchantModal.html",'<md-dialog aria-label="Modal" flex>\n    <form name="form">\n        <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2 ng-bind="merchant.id ? \'Edit Merchant\' : \'Add Merchant\'"></h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar>\n        <md-dialog-content>\n            <div class="md-dialog-content">\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Name</label>\n                        <input name="name" ng-model="merchant.name" required type="text">\n                        <em class="error-message" ng-show="form.name.$error.required">Enter merchant name</em>\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Description</label>\n                        <textarea name="description" minlength="3" required ng-model="merchant.description" rows="5" md-select-on-focus></textarea>\n                        <em class="error-message" ng-show="form.description.$error.required">Please enter description</em>\n                        <em class="error-message" ng-show="form.description.$error.minlength">Description must be at least 3 characters long</em>\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <div flex>\n                        <md-autocomplete md-input-name="area" md-selected-item="selectedArea" md-search-text="searchAreaText" md-selected-item-change="selectArea(area)" required md-items="area in loadArea(searchAreaText)" md-item-text="area.name" md-require-match md-delay="300" md-min-length="0" md-floating-label="Area">\n                            <md-item-template>\n                                <span md-highlight-text="searchAreaText">{{area.name}}</span>\n                            </md-item-template>\n                            <md-not-found>\n                                No states matching "{{searchAreaText}}" were found.\n                            </md-not-found>\n                            <em class="error-message" ng-show="form.area.$error.required">Please select area</em>\n                        </md-autocomplete>\n                    </div>\n                    <div flex>\n                        <md-autocomplete md-selected-item="selectedShoppingCenter" md-no-cache="true" md-search-text="searchTextShoppingCenter" md-selected-item-change="selectShoppingCenter(shoppingCenter)" md-items="shoppingCenter in loadShoppingCenters(searchTextShoppingCenter)" md-item-text="shoppingCenter.name" md-require-match md-delay="300" md-min-length="0" md-floating-label="Shopping Center">\n                            <md-item-template>\n                                <span md-highlight-text="searchTextShoppingCenter">{{shoppingCenter.name}}</span>\n                            </md-item-template>\n                            <md-not-found>\n                                No states matching "{{searchTextShoppingCenter}}" were found.\n                            </md-not-found>\n                        </md-autocomplete>\n                    </div>\n                </div>\n                <div layout="row">\n                    <md-input-container flex ng-if="!merchant.shopping_center_id">\n                        <label>Shopping Center Name</label>\n                        <input name="shopping_center_name" ng-model="merchant.shopping_center_name" ng-required="!merchant.shopping_center_id || !shoppingCenter.lat || !shoppingCenter.lon" type="text">\n                        <em class="error-message" ng-show="form.shopping_center_name.$error.required">Required if shopping center is not selected</em>\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Zip</label>\n                        <input ng-model="merchant.zip" name="zip" ng-change="geoLocationByZip(merchant.zip)" ng-required="!merchant.shopping_center_id" type="text">\n                        <em class="error-message" ng-show="form.zip.$error.required">Please enter ZIP code</em>\n                    </md-input-container>\n                    <div layout="row">\n                        <md-input-container flex>\n                            <label>Address</label>\n                            <input name="address" ng-model="merchant.address" ng-required="!merchant.shopping_center_id" ng-disabled="loadingByZip" type="text">\n                            <em class="error-message" ng-show="form.address.$error.required">Please enter address</em>\n                        </md-input-container>\n                        <md-input-container flex>\n                            <label>Suite number</label>\n                            <input name="suite_number" ng-model="merchant.suite_number" ng-required="!merchant.address" ng-disabled="loadingByZip" type="text">\n                            <em class="error-message" ng-show="form.suite_number.$error.required">Please enter suite number</em>\n                        </md-input-container>\n                    </div>\n                    <md-input-container flex>\n                        <label>City</label>\n                        <input ng-model="merchant.city" name="city" ng-required="!merchant.shopping_center_id" ng-disabled="loadingByZip" required type="text">\n                        <em class="error-message" ng-show="form.city.$error.required">Please enter city name</em>\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Latitude</label>\n                        <input name="lat" ng-model="merchant.lat" required ng-disabled="loadingByZip" type="number" step="any">\n                        <em class="error-message" ng-show="form.lat.$error.required">Please enter latitude</em>\n                    </md-input-container>\n                    <md-input-container flex>\n                        <label>Longitude</label>\n                        <input name="lon" ng-model="merchant.lon" required ng-disabled="loadingByZip" type="number" step="any">\n                        <em class="error-message" ng-show="form.lon.$error.required">Please enter Longitude</em>\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Phone</label>\n                        <input ng-model="merchant.phone" type="text">\n                    </md-input-container>\n                    <md-input-container flex>\n                        <label>Website</label>\n                        <input ng-model="merchant.website" type="text">\n                        <em>* http://www.example.com</em>\n                    </md-input-container>\n                </div>\n                <div layout="column">\n                    <md-input-container flex md-no-float>\n                        <label></label>\n                        <tags-input ng-model="merchant.categories" replaces-spaces-with-dashes="false" aria-label="Category" placeholder="Add Category" debounce-delay="100" key-property="id" display-property="name" add-from-autocomplete-only="true" max-results-to-show="10">\n                            <auto-complete source="loadCategories($query)" aria-label="Category" load-on-focus="true" load-on-empty="true" min-length="0" debounce-delay="100"></auto-complete>\n                        </tags-input>\n                        <em ng-if="categoryLoading">Please wait...</em>\n                    </md-input-container>\n                </div>\n                <div layout="column">\n                    <h4>Merchant Logo</h4>\n                    <div ng-if="imagePreparedForUpload" file="imagePreparedForUpload._file" width="140" height="140" ng-thumb></div>\n                    <div class="merchant-logo-container" ng-if="merchant.logo && !imagePreparedForUpload">\n                        <a href="#" ng-click="removeLogo()"><i class="fa fa-minus-circle" aria-hidden="true"></i></a>\n                        <img width="140" height="140" ng-src="{{merchant.logo}}">\n                    </div>\n                </div>\n                <input type="file" nv-file-select="" uploader="uploader" />\n            </div>\n        </md-dialog-content>\n        <md-dialog-actions layout="row">\n            <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button>\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary" ng-disabled="form.$invalid || loading">\n                <span ng-show="!loading">Save</span>\n                <span ng-show="loading">Please wait...</span>\n            </md-button>\n        </md-dialog-actions>\n    </form>\n</md-dialog>'),t.put("/app/sections/merchant/modals/notificationModal/merchantNotificationModal.html",'<md-dialog aria-label="Modal" flex>\n    <md-toolbar>\n        <div class="md-toolbar-tools">\n            <span class="padding-bottom-0"><i class="fa fa-bell" aria-hidden="true"></i> {{merchant.name}}</span>\n            <span flex></span>\n            <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n            </md-button>\n        </div>\n    </md-toolbar>\n    <form novalidate flex layout="column" ng-submit="send()">\n        <md-dialog-content>\n            <div class="md-dialog-content">\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Title</label>\n                        <input ng-model="notification.title" required type="text">\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Description</label>\n                        <textarea maxlength="200" ng-model="notification.description" required rows="3" md-select-on-focus></textarea>\n                        <em pull-right>{{notification.description.length ? notification.description.length : 0}}/200</em>\n                    </md-input-container>\n                </div>\n                <md-dialog-actions layout="row">\n                    <md-button type="submit" class="md-raised md-primary" ng-disabled="form.$invalid || loading">\n                        <span ng-show="!loading">Send</span>\n                        <span ng-show="loading"><i class="fa fa-cog fa-spin"></i> Please wait...</span>\n                    </md-button>\n                </md-dialog-actions>\n            </div>\n        </md-dialog-content>\n    </form>\n</md-dialog>'),t.put("/app/sections/merchantRequest/merchantRequest.html",'<div>\n    <div layout="column">\n        <span class="padding-bottom-0"><i class="fa fa-database" aria-hidden="true"></i> Requests for Merchants to approve</span>\n        <h4 ng-show="loading" class="text-center">Please wait...</h4>\n        <md-table-container ng-if="total > 0">\n            <table md-table md-progress="promise">\n                <thead md-head>\n                    <tr md-row>\n                        <th md-column>Name</th>\n                    </tr>\n                </thead>\n                <tbody md-body>\n                    <tr md-row ng-repeat="merchant in merchants track by $index">\n                        <td md-cell ng-bind="merchant.name"></td>\n                        <td md-cell text-right>\n                            <md-button class="md-raised" ng-click="previewMerchantModal($event, merchant)">Preview</md-button>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </md-table-container>\n        <h4 ng-show="!loading && !total && !params.search" class="text-center">Currently there are no merchants waiting for approval.</h4>\n        <md-table-pagination ng-if="total > 0"\n                             md-options="[10, 20, 30]"\n                             md-limit="params.limit"\n                             md-page="params.page"\n                             md-total="{{total}}"\n                             md-on-paginate="onPaginate"\n                             md-page-select></md-table-pagination>\n    </div>\n</div>'),t.put("/app/sections/merchantRequest/modals/merchantRequestModal.html",'<md-dialog aria-label="Modal" flex>\n    <form name="form">\n        <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2>Merchant request review</h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar>\n        <md-dialog-content>\n            <div class="md-dialog-content">\n                <table class="table">\n                    <tr>\n                        <td>Name</td>\n                        <td ng-bind="merchant.name"></td>\n                    </tr>\n                    <tr>\n                        <td>Area</td>\n                        <td ng-bind="merchant.areaName ? merchant.areaName : \'-\'"></td>\n                    </tr>\n                    <tr>\n                        <td>Address</td>\n                        <td ng-bind="merchant.address"></td>\n                    </tr>\n                    <tr>\n                        <td>City</td>\n                        <td ng-bind="merchant.city"></td>\n                    </tr>\n                    <tr>\n                        <td>Zip</td>\n                        <td ng-bind="merchant.zip"></td>\n                    </tr>\n                    <tr>\n                        <td>Phone</td>\n                        <td ng-bind="merchant.phone"></td>\n                    </tr>\n                    <tr>\n                        <td>Website</td>\n                        <td ng-bind="merchant.website"></td>\n                    </tr>\n                </table>\n            </div>\n        </md-dialog-content>\n        <md-dialog-actions layout="row">\n            <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button>\n            <md-button type="submit" ng-click="approve()" class="md-raised md-primary" ng-disabled="loadingApprove || loadingReject">\n                <span ng-show="!loadingApprove">Approve</span>\n                <span ng-show="loadingApprove">Please wait...</span>\n            </md-button>\n            <md-button type="submit" ng-click="reject()" class="md-raised md-warn" ng-disabled="loadingReject || loadingApprove">\n                <span ng-show="!loadingReject">Reject</span>\n                <span ng-show="loadingReject">Please wait...</span>\n            </md-button>\n        </md-dialog-actions>\n    </form>\n</md-dialog>\n'),t.put("/app/sections/pushNotifications/pushNotification.html",'<div layout="column">\n    <span class="padding-bottom table-title">\n    \x3c!-- <i class="fa fa-bell" aria-hidden="true"></i> --\x3e\n    Push notifications</span>\n    <form novalidate flex layout="column" ng-submit="send()">\n        <div layout="column">\n            <md-input-container flex>\n                <label>Title</label>\n                <input ng-model="notification.title" required type="text">\n            </md-input-container>\n            <md-input-container flex>\n                <label>Description</label>\n                <textarea maxlength="200" ng-model="notification.description" required rows="3" md-select-on-focus></textarea>\n                <em pull-right>{{notification.description.length ? notification.description.length : 0}}/200</em>\n            </md-input-container>\n            <section layout="row">\n                <md-button type="submit" class="md-raised md-primary" ng-disabled="form.$invalid || loading">\n                    <span ng-show="!loading"><span class="icon-lic-send-notification btn-icon"></span>Send</span>\n                    <span ng-show="loading"><i class="fa fa-cog fa-spin"></i> Please wait...</span>\n                </md-button>\n            </section>\n        </div>\n    </form>\n</div>'),t.put("/app/sections/register/register.html",'<md-content flex layout="row" layout-align="center center">\n\t\t<div flex-sm="80" flex-gt-sm="60" layout="column" class="register-container">\n\t\t\t\t<md-whiteframe class="md-whiteframe-1dp">\n\t\t\t\t\t\t<md-content class="md-padding">\n\t\t\t\t\t\t\t\t<div flex layout="column" layout-align="center center" md-accent-color>\n\t\t\t\t\t\t\t\t\t\t<img src="../../../assets/images/logo.png"/>\n\t\t\t\t\t\t\t\t\t\t<div layout="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container class="no-mrg">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-button class="md-fab md-primary" ng-class="{\'active-step\': step == 1}" aria-label="Use Android">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-button>\n\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container layout="row" class="no-mrg" layout-align="center center">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container class="no-mrg">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-button class="md-fab md-primary" ng-click="selectStep(2)" ng-class="{\'active-step\': step == 2}" ng-disabled="step < 2" aria-label="Use Android">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-button>\n\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container layout="row" class="no-mrg" layout-align="center center">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container class="no-mrg">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-button class="md-fab md-primary" ng-click="selectStep(3)" ng-class="{\'active-step\': step == 3}" ng-disabled="step < 3" aria-label="Use Android">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t3\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-button>\n\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div ng-form="formStepOne" ng-if="step == 1" layout="column">\n\t\t\t\t\t\t\t\t\t\t<div layout="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>User Type</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-select ng-model="data.selectedUserType" required ng-change="changeUserType()" placeholder="Select user type">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-option ng-value="type" ng-repeat="type in userTypes">{{ type.name }}</md-option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-select>\n\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div layout="row" flex>\n\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>First name</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" ng-model="user.first_name" required>\n\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Last name</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" ng-model="user.last_name" required>\n\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t<label>Email</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<input type="text"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t ng-model="user.email"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t required\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t ng-blur="checkEmail(user.email)"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t ng-pattern="/^[_a-z0-9]+(\\.[_a-z0-9]+)*@[a-z0-9-]+(\\.[a-z0-9-]+)*(\\.[a-z]{2,4})$/">\n\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<input type="password" ng-minlength="6" ng-model="user.password" required>\n\t\t\t\t\t\t\t\t\t\t\t\t<em>* minimum 6 characters long</em>\n\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t<label>Repeat Password</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<input type="password" ng-minlength="6" ng-model="user.password_confirmation" required>\n\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t<md-button class="md-raised md-primary" type="submit" pull-right ng-click="registerUser()" ng-disabled="formStepOne.$invalid || user.password != user.password_confirmation || loading">\n\t\t\t\t\t\t\t\t\t\t\t\t<span ng-show="!loading">Next</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span ng-show="loading"><i class="fa fa-cog fa-spin"></i> Please wait...</span>\n\t\t\t\t\t\t\t\t\t\t</md-button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div ng-form="formStepTwo" ng-if="step == 2" layout="column" flex>\n\t\t\t\t\t\t\t\t\t\t<div layout="column" ng-if="data.selectedUserType.id == 1">\n\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Merchant\'s Name</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" ng-model="userType.name" required>\n\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t<div layout="row">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-autocomplete md-selected-item="data.selectedArea"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-search-text="data.searchAreaText"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-selected-item-change="selectArea(area)"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-items="area in loadArea(data.searchAreaText)"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-item-text="area.name"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t required\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-delay="300"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-min-length="0"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-require-match\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-floating-label="Area">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-item-template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span md-highlight-text="data.searchAreaText">{{area.name}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-item-template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-not-found>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNo matching "{{data.searchAreaText}}" areas were found.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-not-found>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-autocomplete>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div flex layout="row">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-autocomplete flex md-selected-item="data.selectedShoppingCenter"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-no-cache="true"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-search-text="data.searchTextShoppingCenter"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-selected-item-change="selectShoppingCenter(shoppingCenter)"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-items="shoppingCenter in loadShoppingCenters(data.searchTextShoppingCenter)"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-item-text="shoppingCenter.name"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-require-match\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-delay="300"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-min-length="0"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-floating-label="Shopping Center">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-item-template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span md-highlight-text="data.searchTextShoppingCenter">{{shoppingCenter.name}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-item-template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-not-found>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNo matching "{{data.searchTextShoppingCenter}}" shopping center were found.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-not-found>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-autocomplete>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex ng-if="!userType.shopping_center_id">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Shopping Center Name</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" ng-model="userType.shopping_center_name" ng-required="!userType.shopping_center_id">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div layout="row">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>ZIP</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" ng-change="geoLocationByZip(userType.zip)" ng-model="userType.zip" ng-required="!userType.shopping_center_id">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>City Name</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" ng-model="userType.city" ng-disabled="loadingByZip" ng-required="!userType.shopping_center_id">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Address</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" ng-model="userType.address" ng-disabled="loadingByZip" ng-required="!userType.shopping_center_id">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div layout="row">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Phone</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" ng-minlength="6" ng-model="userType.phone"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Website</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" placeholder="http://www.example.com" ng-model="userType.website"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div layout="row">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Categories</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tags-input ng-model="userType.categories"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey-property="id"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder="Add Category"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay-property="name"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tadd-from-autocomplete-only="true"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treplace-spaces-with-dashes="false"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax-results-to-show="10">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<auto-complete debounce-delay="100"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t source="loadCategories($query)"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t load-on-empty="true"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t min-length="0"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t load-on-focus="true">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</auto-complete>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tags-input>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div layout="column" ng-if="data.selectedUserType.id == 2">\n\t\t\t\t\t\t\t\t\t\t\t\t<div layout="row">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Shopping Center Name</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" ng-model="userType.name" required>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-autocomplete md-selected-item="data.selectedArea"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-search-text="data.searchAreaText"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-selected-item-change="selectArea(area)"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-items="area in loadArea(data.searchAreaText)"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-item-text="area.name"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t required\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-delay="300"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-min-length="0"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-require-match\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t md-floating-label="Area">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-item-template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span md-highlight-text="data.searchAreaText">{{area.name}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-item-template>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-not-found>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNo matching "{{data.searchAreaText}}" areas were found.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-not-found>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-autocomplete>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div layout="row">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Description</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea rows="2" type="text" ng-model="userType.description" required></textarea>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div layout="row">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>ZIP</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" ng-model="userType.zip" ng-change="geoLocationByZip(userType.zip)" ng-required="!userType.shopping_center_id">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>City Name</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" ng-model="userType.city" ng-disabled="loadingByZip" ng-required="!userType.shopping_center_id">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Address</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" ng-model="userType.address" ng-disabled="loadingByZip" ng-required="!userType.shopping_center_id">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div layout="row">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-input-container flex>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Website</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" placeholder="http://www.example.com" ng-model="userType.website"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</md-input-container>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<md-button class="md-raised md-primary" ng-click="openTimeModal($event)">Set Shopping Center working hours</md-button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<md-button class="md-raised md-primary" type="button" ng-click="register()" pull-right ng-disabled="formStepTwo.$invalid || loading || !data.selectedUserType">\n\t\t\t\t\t\t\t\t\t\t\t\t<span ng-show="!loading">Register</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span ng-show="loading"><i class="fa fa-cog fa-spin"></i> Please wait...</span>\n\t\t\t\t\t\t\t\t\t\t</md-button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div ng-form="formStepThree" ng-if="step == 3" layout="column" class="text-center">\n\t\t\t\t\t\t\t\t\t\t<p>Thank you!</p>\n\t\t\t\t\t\t\t\t\t\t<p>Your registration has been submitted and your {{data.selectedUserType.id == 1 ? \'Merchant\' : \'Shopping center\'}} account is waiting for activation. </p>\n\t\t\t\t\t\t\t\t\t\t<p>After you received activation link on e-mail you can start adding coupons.</p>\n\t\t\t\t\t\t\t\t\t\t<md-button class="md-raised md-primary" type="button" ui-sref="login" class="pull-right">OK</md-button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</md-content>\n\t\t\t\t</md-whiteframe>\n\t\t</div>\n</md-content>\n'),t.put("/app/sections/settings/settings.html",'\x3c!-- <md-dialog aria-label="Modal" flex> --\x3e\n<div flex layout="column">\n    <span class="padding-bottom table-title">\n        User {{user.id ? \'Edit\' : \'Add\'}}\n    </span>\n    <form name="form">\n        \x3c!-- <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2>User {{user.id ? \'Edit\' : \'Add\'}}</h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar> --\x3e\n        <md-content flex layout="column" layout-padding>\n            <div layout="column">\n                <div layout="row" ng-if="!profileEdit">\n                    <md-input-container>\n                        <label>User type</label>\n                        <md-select ng-model="user.type" ng-change="roleChanged()">\n                            <md-option ng-if="userRole.id" ng-repeat="userRole in userRoles" ng-value="userRole.id">\n                                {{userRole.name}}\n                            </md-option>\n                        </md-select>\n                    </md-input-container>\n                    <div flex ng-if="user.type == 1 && !user.id">\n                        <md-autocomplete md-input-name="merchant" md-selected-item="selectedMerchant" md-search-text="data.searchMerchantText" md-selected-item-change="selectMerchant(merchant)"\n                                         md-items="merchant in loadMerchants(data.searchMerchantText)" md-item-text="merchant.name" md-require-match md-delay="300"\n                                         md-min-length="0" md-floating-label="Merchant">\n                            <md-item-template>\n                                <span md-highlight-text="data.searchMerchantText">{{merchant.name}}</span>\n                            </md-item-template>\n                            <md-not-found>\n                                No matching "{{data.searchMerchantText}}" merchants were found.\n                            </md-not-found>\n                        </md-autocomplete>\n                    </div>\n                    <div flex ng-if="user.type == 2 && !user.id">\n                        <md-autocomplete md-input-name="shippingCenter" md-selected-item="selectedShoppingCenter" md-search-text="data.searchShoppingCenterText" md-selected-item-change="selectShoppingCenter(shoppingCenter)"\n                                         md-items="shoppingCenter in loadShoppingCenters(data.searchShoppingCenterText)" md-item-text="shoppingCenter.name" md-require-match md-delay="300"\n                                         md-min-length="0" md-floating-label="Shopping Center">\n                            <md-item-template>\n                                <span md-highlight-text="data.searchShoppingCenterText">{{shoppingCenter.name}}</span>\n                            </md-item-template>\n                            <md-not-found>\n                                No matching "{{data.searchShoppingCenterText}}" shopping centers were found.\n                            </md-not-found>\n                        </md-autocomplete>\n                    </div>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>First Name</label>\n                        <input ng-model="user.first_name" required type="text">\n                    </md-input-container>\n                    <md-input-container flex>\n                        <label>Last Name</label>\n                        <input ng-model="user.last_name" required type="text">\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Email</label>\n                        <input required ng-model="user.email" type="text" ng-pattern="/^[_a-z0-9]+(\\.[_a-z0-9]+)*@[a-z0-9-]+(\\.[a-z0-9-]+)*(\\.[a-z]{2,4})$/">\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Password</label>\n                        <input ng-required="!user.id" ng-minlength="6" ng-model="user.password" type="password">\n                        <em>* minimum 6 characters long</em>\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Password Confirmation</label>\n                        <input ng-required="!user.id" ng-model="user.password_confirmation" type="password" ng-minlength="6">\n                    </md-input-container>\n                </div>\n                <div layout="row" ng-if="user.type == 3 && user.id == session.user_id">\n                    <md-switch ng-model="user.notifications" ng-true-value="1" ng-false-value="0" aria-label="Email notification">\n                        Email notification: {{ user.notifications ? \'Yes\' : \'No\'}}\n                    </md-switch>\n                </div>\n            </div>\n        </md-content>\n        <section layout="row">\n            \x3c!-- <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button> --\x3e\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary" ng-disabled="form.$invalid || loading || user.password != user.password_confirmation">\n                <span ng-show="loading">Please wait...</span>\n                <span ng-show="!loading && user.id"><span class="icon-lic-update btn-icon"></span>Update</span>\n                <span ng-show="!loading && !user.id">Add</span>\n            </md-button>\n        </section>\n    </form>\n</div>\n\n\n\n\x3c!-- </md-dialog> --\x3e'),t.put("/app/sections/shoppingCenters/modals/merchantListModal.html",'<md-dialog aria-label="Modal" flex>\n    <form name="form">\n        <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2>Merchants</h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar>\n        <md-dialog-content>\n            <md-table-container ng-if="total > 0 && !loading">\n                <table md-table>\n                    <thead md-head md-order="params.sort_by" md-on-reorder="sortMerchants">\n                    <tr md-row>\n                        <th md-column md-order-by="id">\n                            <span>No.</span>\n                            <i class="fa fa-sort" aria-hidden="true">\n                                <md-tooltip md-direction="bottom">Sort by Id</md-tooltip>\n                            </i>\n                        </th>\n                        <th md-column md-order-by="name">\n                            <span>Name</span>\n                            <i class="fa fa-sort" aria-hidden="true">\n                                <md-tooltip md-direction="bottom">Sort by Name</md-tooltip>\n                            </i>\n                        </th>\n                        <th md-column>\n                            <span>Shopping Center</span>\n                        </th>\n                        <th></th>\n                    </tr>\n                    </thead>\n                    <tbody md-body>\n                    <tr md-row ng-repeat="merchant in merchants track by $index">\n                        <td md-cell ng-bind="merchant.id"></td>\n                        <td md-cell ng-bind="merchant.name"></td>\n                        <td md-cell ng-bind="merchant.shopping_center_name ? merchant.shopping_center_name : \'-\'"></td>\n                        <td md-cell text-right>\n                            <md-button aria-label="Coupons" class="md-raised" ng-click="goToCouponsPage(merchant)">\n                                <i class="fa fa-id-card-o" aria-hidden="true"></i>\n                                <md-tooltip md-direction="bottom">Coupons</md-tooltip>\n                            </md-button>\n                            <md-button aria-label="Edit" class="md-raised"\n                                       ng-click="openMerchantModal($event, merchant)">\n                                <i class="fa fa-pencil-square-o" aria-hidden="true"></i>\n                                <md-tooltip md-direction="bottom">Edit</md-tooltip>\n                            </md-button>\n                            <md-button aria-label="Remove" class="md-raised md-warn"\n                                       ng-click="removeModal($event, merchant)">\n                                <i class="fa fa-trash-o" aria-hidden="true"></i>\n                                <md-tooltip md-direction="bottom">Delete</md-tooltip>\n                            </md-button>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </md-table-container>\n            <h4 ng-show="!loading && !total" class="text-center margin-top-10">Currently there are no merchants for\n                selected shopping centar.</h4>\n            <h4 ng-show="loading" class="text-center">Please wait...</h4>\n            <md-table-pagination ng-if="total > 0 && !loading" md-options="[10, 20, 30]" md-limit="params.limit"\n                                 md-page="params.page"\n                                 md-total="{{total}}" md-on-paginate="onPaginate" md-page-select></md-table-pagination>\n        </md-dialog-content>\n        <md-dialog-actions layout="row">\n            <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button>\n        </md-dialog-actions>\n    </form>\n</md-dialog>'),t.put("/app/sections/shoppingCenters/modals/shoppingCenterModal.html",'<md-dialog aria-label="Modal" flex>\n    <form name="form">\n        <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2>Shopping Center {{shoppingCenter.id ? \'Edit - \' + shoppingCenter.name : \'Add\'}}</h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar>\n        <md-dialog-content>\n            <div class="md-dialog-content">\n                <md-tabs md-dynamic-height md-border-bottom md-stretch-tabs="always">\n                    <md-tab label="Details">\n                        <md-content class="md-padding">\n                            <div layout="row">\n                                <md-input-container flex>\n                                    <label>Name</label>\n                                    <input name="name" ng-model="shoppingCenter.name" minlength="3" required\n                                           type="text">\n                                    <em class="error-message" ng-show="form.name.$error.required">Please enter shopping\n                                        center name</em>\n                                    <em class="error-message" ng-show="form.name.$error.minlength">Name must be at least\n                                        3 characters long</em>\n                                </md-input-container>\n                            </div>\n                            <div layout="row">\n                                <md-input-container flex>\n                                    <label>Description</label>\n                                    <textarea name="description" minlength="3" required\n                                              ng-model="shoppingCenter.description" rows="5"\n                                              md-select-on-focus></textarea>\n                                    <em class="error-message" ng-show="form.description.$error.required">Please enter\n                                        description</em>\n                                    <em class="error-message" ng-show="form.description.$error.minlength">Description\n                                        must be at least 3 characters long</em>\n                                </md-input-container>\n                            </div>\n                            <div layout="row">\n                                <div flex>\n                                    <md-autocomplete md-input-name="area" md-selected-item="selectedArea"\n                                                     md-search-text="searchAreaText"\n                                                     md-selected-item-change="selectArea(area)"\n                                                     required md-items="area in loadArea(searchAreaText)"\n                                                     md-item-text="area.name" md-require-match\n                                                     md-delay="300" md-min-length="0" md-floating-label="Area">\n                                        <md-item-template>\n                                            <span md-highlight-text="searchAreaText">{{area.name}}</span>\n                                        </md-item-template>\n                                        <md-not-found>\n                                            No states matching "{{searchAreaText}}" were found.\n                                        </md-not-found>\n                                        <em class="error-message" ng-show="form.area.$error.required">Please select\n                                            area</em>\n                                    </md-autocomplete>\n                                </div>\n                            </div>\n                            <div layout="row">\n                                <md-input-container flex>\n                                    <label>Zip</label>\n                                    <input name="zip"\n                                           ng-model="shoppingCenter.zip"\n                                           ng-change="geoLocationByZip(shoppingCenter.zip)"\n                                           ng-required="!shoppingCenter.lat || !shoppingCenter.lon"\n                                           type="text">\n                                    <em class="error-message" ng-show="form.zip.$error.required">Please enter ZIP\n                                        code</em>\n                                </md-input-container>\n                                <md-input-container flex>\n                                    <label>Address</label>\n                                    <input name="address" ng-model="shoppingCenter.address" required\n                                           ng-disabled="loadingByZip" type="text">\n                                    <em class="error-message" ng-show="form.address.$error.required">Please enter\n                                        address</em>\n                                </md-input-container>\n                                <md-input-container flex>\n                                    <label>City</label>\n                                    <input name="city" ng-model="shoppingCenter.city" required\n                                           ng-disabled="loadingByZip" type="text">\n                                    <em class="error-message" ng-show="form.city.$error.required">Please enter city\n                                        name</em>\n                                </md-input-container>\n                            </div>\n                            <div layout="row">\n                                <md-input-container flex>\n                                    <label>Latitude</label>\n                                    <input name="lat" ng-model="shoppingCenter.lat" required ng-disabled="loadingByZip"\n                                           type="number" step="any">\n                                    <em class="error-message" ng-show="form.lat.$error.required">Please enter\n                                        latitude</em>\n                                </md-input-container>\n                                <md-input-container flex>\n                                    <label>Longitude</label>\n                                    <input name="lng" ng-model="shoppingCenter.lon" required ng-disabled="loadingByZip"\n                                           type="number" step="any">\n                                    <em class="error-message" ng-show="form.lng.$error.required">Please enter\n                                        Longitude</em>\n                                </md-input-container>\n                            </div>\n                            <div layout="row">\n                                <md-input-container flex>\n                                    <label>Website</label>\n                                    <input ng-model="shoppingCenter.website" placeholder="http://www.example.com"\n                                           type="text" name="website">\n                                    <em class="error-message" ng-show="form.website.$error.required">Please enter\n                                        website (http://www.example.com)</em>\n                                </md-input-container>\n                            </div>\n                            <div layout="column">\n                                <h4>Shopping center logo</h4>\n                                <div ng-if="imagePreparedForUpload" file="imagePreparedForUpload._file" width="140" height="140" ng-thumb></div>\n                                <div class="merchant-logo-container" ng-if="shoppingCenter.logo && !imagePreparedForUpload">\n                                    <a href="#" ng-click="removeLogo()"><i class="fa fa-minus-circle" aria-hidden="true"></i></a>\n                                    <img width="140" height="140" ng-src="{{shoppingCenter.logo}}">\n                                </div>\n                            </div>\n                            <input type="file" nv-file-select="" uploader="uploader" />\n                        </md-content>\n                    </md-tab>\n                    <md-tab label="Working hours">\n                        <md-content class="md-padding" ng-form="timeForm">\n                            <div layout="row" class="working-hours-all">\n                                <span>Set all from</span>\n                                <mdp-time-picker name="allFrom" ng-model="all.from"></mdp-time-picker>\n                                <span>to</span>\n                                <mdp-time-picker name="allTo" ng-model="all.to"></mdp-time-picker>\n                                <md-input-container>\n                                    <md-button class="md-raised working-hours-margin-fix" ng-click="setTime()">Set\n                                    </md-button>\n                                </md-input-container>\n                            </div>\n                            <md-table-container>\n                                <table md-table>\n                                    <thead md-head>\n                                    <tr md-row>\n                                        <th md-column>Week Day</th>\n                                        <th md-column>From</th>\n                                        <th md-column>To</th>\n                                    </tr>\n                                    </thead>\n                                    <tbody md-body>\n                                    <tr md-row ng-repeat="day in shoppingCenter.working_hours">\n                                        <td md-cell>\n                                            <span>{{day.day}}</span>\n                                        </td>\n                                        <td md-cell>\n                                            <mdp-time-picker name="dayFrom{{day.day}}"\n                                                             ng-class="{\'work-day-invalid\': day.to && !day.from}"\n                                                             ng-model="day.from">\n                                                <div ng-if="day.to && !day.from" class="red">This is required</div>\n                                            </mdp-time-picker>\n                                        </td>\n                                        <td md-cell>\n                                            <mdp-time-picker name="dayTo{{day.day}}"\n                                                             ng-class="{\'work-day-invalid\': day.from && !day.to }"\n                                                             ng-model="day.to">\n                                                <div ng-if="day.from && !day.to" class="red">This is required</div>\n                                            </mdp-time-picker>\n                                        </td>\n                                    </tr>\n                                    </tbody>\n                                </table>\n                            </md-table-container>\n                        </md-content>\n                    </md-tab>\n                </md-tabs>\n            </div>\n        </md-dialog-content>\n        <md-dialog-actions layout="row">\n            <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button>\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary"\n                       ng-disabled="form.$invalid || loading">\n                <span ng-show="loading">Please wait...</span>\n                <span ng-show="!loading && shoppingCenter.id">Update</span>\n                <span ng-show="!loading && !shoppingCenter.id">Add</span>\n            </md-button>\n        </md-dialog-actions>\n    </form>\n</md-dialog>'),t.put("/app/sections/shoppingCenters/modals/shoppingCenterTimeModal.html",'<md-dialog aria-label="Modal" flex>\n    <form name="form">\n        <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2>Working Days</h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar>\n        <md-dialog-content>\n            <div class="md-dialog-content">\n                <div layout="row" class="working-hours-all">\n                    <span>Set all from</span>\n                    <mdp-time-picker name="allFrom" ng-model="all.from"></mdp-time-picker>\n                    <span>to</span>\n                    <mdp-time-picker name="allTo" ng-model="all.to"></mdp-time-picker>\n                    <md-input-container>\n                        <md-button class="md-raised working-hours-margin-fix" ng-click="setTime()">Set</md-button>\n                    </md-input-container>\n                </div>\n                <md-table-container>\n                    <table md-table>\n                        <thead md-head>\n                            <tr md-row>\n                                <th md-column>Week Day</th>\n                                <th md-column>From</th>\n                                <th md-column>To</th>\n                            </tr>\n                        </thead>\n                        <tbody md-body>\n                            <tr md-row ng-repeat="day in workingDays">\n                                <td md-cell>\n                                    <span>{{day.day}}</span>\n                                </td>\n                                <td md-cell>\n                                    <mdp-time-picker ng-model="day.from"></mdp-time-picker>\n                                </td>\n                                <td md-cell>\n                                    <mdp-time-picker ng-model="day.to"></mdp-time-picker>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </md-table-container>\n            </div>\n        </md-dialog-content>\n        <md-dialog-actions layout="row">\n            <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button>\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary" ng-disabled="form.$invalid || loading">\n                <span ng-show="loading">Please wait...</span>\n                <span ng-show="!loading && shoppingCenter.id">Update</span>\n                <span ng-show="!loading && !shoppingCenter.id">Add</span>\n            </md-button>\n        </md-dialog-actions>\n    </form>\n</md-dialog>'),t.put("/app/sections/shoppingCenters/shopping-centers.html",'<div>\n    <div layout="column">\n        <span class="padding-bottom-0"><i class="fa fa-database" aria-hidden="true"></i> Shopping Centers</span>\n        <form novalidate flex layout="row" ng-submit="search()">\n            <md-input-container flex>\n                <label>Search</label>\n                <input type="text" autocomplete="off" ng-disabled="!total && !params.search" ng-model="params.search"\n                       ng-change="search()">\n            </md-input-container>\n            <md-button class="md-fab md-mini" type="submit" ng-disabled="!total && !params.search" aria-label="Search">\n                <i class="fa fa-search"></i>\n            </md-button>\n            <md-input-container class="no" ng-if="session.role ==\'admin\'">\n                <md-button class="md-raised md-primary" type="button" ng-click="shoppingCenterModal($event)"\n                           aria-label="Add">\n                    Add\n                </md-button>\n            </md-input-container>\n        </form>\n        <h4 ng-show="loading" class="text-center">Please wait...</h4>\n        <md-table-container ng-if="total > 0 && !loading">\n            <table md-table md-progress="promise">\n                <thead md-head md-order="params.sort_by" md-on-reorder="sortShoppingCenters">\n                <tr md-row>\n                    <th md-column md-order-by="name">\n                        <span>Name</span>\n                        <i class="fa fa-sort" aria-hidden="true">\n                            <md-tooltip md-direction="bottom">Sort by Name</md-tooltip>\n                        </i>\n                    </th>\n                    <th md-column md-order-by="area_name">\n                        <span>Area</span>\n                        <i class="fa fa-sort" aria-hidden="true">\n                            <md-tooltip md-direction="bottom">Sort by Area</md-tooltip>\n                        </i>\n                    </th>\n                </tr>\n                </thead>\n                <tbody md-body>\n                <tr md-row ng-repeat="shoppingCenter in shoppingCenters track by $index">\n                    <td md-cell ng-bind="shoppingCenter.name"></td>\n                    <td md-cell ng-bind="shoppingCenter.area_name"></td>\n                    <td md-cell text-right>\n                        <md-button class="md-raised" ng-click="merchantsModal($event, shoppingCenter)">\n                            <i class="fa fa-list-alt" aria-hidden="true"></i>\n                            <md-tooltip md-direction="bottom">Merchants</md-tooltip>\n                        </md-button>\n                        <md-button class="md-raised" ng-click="shoppingCenterModal($event, shoppingCenter)">\n                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>\n                            <md-tooltip md-direction="bottom">Edit</md-tooltip>\n                        </md-button>\n                        <md-button class="md-raised md-warn" ng-if="session.role != \'sc-user\'" ng-disabled="shoppingCenter.loading"\n                                   ng-click="removeModal($event, shoppingCenter)">\n                            <i class="fa fa-trash-o" aria-hidden="true"></i>\n                            <md-tooltip md-direction="bottom">Delete</md-tooltip>\n                        </md-button>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </md-table-container>\n        <h4 ng-show="!loading && !total && !params.search" class="text-center">Currently there are no shopping centers\n            in your database.</h4>\n        <md-table-pagination ng-if="total > 0 && !loading" md-options="[10, 20, 30]" md-limit="params.limit"\n                             md-page="params.page"\n                             md-total="{{total}}" md-on-paginate="onPaginate" md-page-select></md-table-pagination>\n    </div>\n</div>'),t.put("/app/sections/users/modals/passwordModal.html",'<md-dialog aria-label="Modal" flex>\n    <form name="form">\n        <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2>Change password for {{user.first_name}} {{user.last_name}}</h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar>\n        <md-dialog-content>\n            <div class="md-dialog-content" layout="column">\n                <div layout="row" ng-if="session.role != \'admin\'">\n                    <md-input-container flex>\n                        <label>Old password</label>\n                        <input required ng-model="model.old_password" type="password">\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>New Password</label>\n                        <input ng-minlength="6" ng-model="model.password" required type="password">\n                    </md-input-container>\n                </div>\n                <em>* minimum 6 characters long</em>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Confirm Password</label>\n                        <input ng-minlength="6" ng-model="model.password_confirmation" required type="password">\n                    </md-input-container>\n                </div>\n            </div>\n        </md-dialog-content>\n        <md-dialog-actions layout="row">\n            <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button>\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary" ng-disabled="form.$invalid || loading || model.password != model.password_confirmation">\n                <span ng-show="loading">Please wait...</span>\n                <span ng-show="!loading">Update</span>\n            </md-button>\n        </md-dialog-actions>\n    </form>\n</md-dialog>\n'),t.put("/app/sections/users/modals/userModal.html",'<md-dialog aria-label="Modal" flex>\n    <form name="form">\n        <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2>User {{user.id ? \'Edit\' : \'Add\'}}</h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar>\n        <md-dialog-content>\n            <div class="md-dialog-content">\n                <div layout="row" ng-if="!profileEdit">\n                    <md-input-container>\n                        <label>User type</label>\n                        <md-select ng-model="user.type" ng-change="roleChanged()">\n                            <md-option ng-if="userRole.id" ng-repeat="userRole in userRoles" ng-value="userRole.id">\n                                {{userRole.name}}\n                            </md-option>\n                        </md-select>\n                    </md-input-container>\n                    <div flex ng-if="user.type == 1 && !user.id">\n                        <md-autocomplete md-input-name="merchant" md-selected-item="selectedMerchant" md-search-text="data.searchMerchantText" md-selected-item-change="selectMerchant(merchant)"\n                                         md-items="merchant in loadMerchants(data.searchMerchantText)" md-item-text="merchant.name" md-require-match md-delay="300"\n                                         md-min-length="0" md-floating-label="Merchant">\n                            <md-item-template>\n                                <span md-highlight-text="data.searchMerchantText">{{merchant.name}}</span>\n                            </md-item-template>\n                            <md-not-found>\n                                No matching "{{data.searchMerchantText}}" merchants were found.\n                            </md-not-found>\n                        </md-autocomplete>\n                    </div>\n                    <div flex ng-if="user.type == 2 && !user.id">\n                        <md-autocomplete md-input-name="shippingCenter" md-selected-item="selectedShoppingCenter" md-search-text="data.searchShoppingCenterText" md-selected-item-change="selectShoppingCenter(shoppingCenter)"\n                                         md-items="shoppingCenter in loadShoppingCenters(data.searchShoppingCenterText)" md-item-text="shoppingCenter.name" md-require-match md-delay="300"\n                                         md-min-length="0" md-floating-label="Shopping Center">\n                            <md-item-template>\n                                <span md-highlight-text="data.searchShoppingCenterText">{{shoppingCenter.name}}</span>\n                            </md-item-template>\n                            <md-not-found>\n                                No matching "{{data.searchShoppingCenterText}}" shopping centers were found.\n                            </md-not-found>\n                        </md-autocomplete>\n                    </div>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>First Name</label>\n                        <input ng-model="user.first_name" required type="text">\n                    </md-input-container>\n                    <md-input-container flex>\n                        <label>Last Name</label>\n                        <input ng-model="user.last_name" required type="text">\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Email</label>\n                        <input required ng-model="user.email" type="text" ng-pattern="/^[_a-z0-9]+(\\.[_a-z0-9]+)*@[a-z0-9-]+(\\.[a-z0-9-]+)*(\\.[a-z]{2,4})$/">\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Password</label>\n                        <input ng-required="!user.id" ng-minlength="6" ng-model="user.password" type="password">\n                        <em>* minimum 6 characters long</em>\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Password Confirmation</label>\n                        <input ng-required="!user.id" ng-model="user.password_confirmation" type="password" ng-minlength="6">\n                    </md-input-container>\n                </div>\n                <div layout="row" ng-if="user.type == 3 && user.id == session.user_id">\n                    <md-switch ng-model="user.notifications" ng-true-value="1" ng-false-value="0" aria-label="Email notification">\n                        Email notification: {{ user.notifications ? \'Yes\' : \'No\'}}\n                    </md-switch>\n                </div>\n            </div>\n        </md-dialog-content>\n        <md-dialog-actions layout="row">\n            <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button>\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary" ng-disabled="form.$invalid || loading || user.password != user.password_confirmation">\n                <span ng-show="loading">Please wait...</span>\n                <span ng-show="!loading && user.id">Update</span>\n                <span ng-show="!loading && !user.id">Add</span>\n            </md-button>\n        </md-dialog-actions>\n    </form>\n</md-dialog>'),t.put("/app/sections/users/passwordChange/passwordModal.html",'\x3c!-- <md-dialog aria-label="Modal" flex> --\x3e\n<div flex layout="column">\n    <span class="padding-bottom table-title">\n        Change password for {{user.first_name}} {{user.last_name}}\n    </span>\n    <form name="form">\n        \x3c!-- <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2>Change password for {{user.first_name}} {{user.last_name}}</h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar> --\x3e\n        <md-content flex layout="column" layout-padding>\n            <div layout="column">\n                <div layout="row" ng-if="session.role != \'admin\'">\n                    <md-input-container flex>\n                        <label>Old password</label>\n                        <input required ng-model="model.old_password" type="password">\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>New Password</label>\n                        <input ng-minlength="6" ng-model="model.password" required type="password">\n                    </md-input-container>\n                </div>\n                <em>* minimum 6 characters long</em>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Confirm Password</label>\n                        <input ng-minlength="6" ng-model="model.password_confirmation" required type="password">\n                    </md-input-container>\n                </div>\n            </div>\n        </md-content>\n        <section layout="row">\n            \x3c!-- <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button> --\x3e\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary" ng-disabled="form.$invalid || loading || model.password != model.password_confirmation">\n                <span ng-show="loading">Please wait...</span>\n                <span ng-show="!loading"><span class="icon-lic-update btn-icon"></span>Update</span>\n            </md-button>\n        </section>\n    </form>\n</div>\n\x3c!-- </md-dialog> --\x3e\n'),t.put("/app/sections/users/userEdit/userModal.html",'\x3c!-- <md-dialog aria-label="Modal" flex> --\x3e\n<div flex layout="column">\n    <span class="padding-bottom table-title">\n        User {{user.id ? \'Edit\' : \'Add\'}}\n    </span>\n    <form name="form">\n        \x3c!-- <md-toolbar>\n            <div class="md-toolbar-tools">\n                <h2>User {{user.id ? \'Edit\' : \'Add\'}}</h2>\n                <span flex></span>\n                <md-button type="button" class="md-icon-button" ng-click="cancel()">\n                    <md-icon class="fa" md-font-icon="fa-times" aria-label="Close dialog"></md-icon>\n                </md-button>\n            </div>\n        </md-toolbar> --\x3e\n        <md-content flex layout="column" layout-padding>\n            <div layout="column">\n                <div layout="row" ng-if="!profileEdit">\n                    <md-input-container>\n                        <label>User type</label>\n                        <md-select ng-model="user.type" ng-change="roleChanged()">\n                            <md-option ng-if="userRole.id" ng-repeat="userRole in userRoles" ng-value="userRole.id">\n                                {{userRole.name}}\n                            </md-option>\n                        </md-select>\n                    </md-input-container>\n                    <div flex ng-if="user.type == 1 && !user.id">\n                        <md-autocomplete md-input-name="merchant" md-selected-item="selectedMerchant" md-search-text="data.searchMerchantText" md-selected-item-change="selectMerchant(merchant)"\n                                         md-items="merchant in loadMerchants(data.searchMerchantText)" md-item-text="merchant.name" md-require-match md-delay="300"\n                                         md-min-length="0" md-floating-label="Merchant">\n                            <md-item-template>\n                                <span md-highlight-text="data.searchMerchantText">{{merchant.name}}</span>\n                            </md-item-template>\n                            <md-not-found>\n                                No matching "{{data.searchMerchantText}}" merchants were found.\n                            </md-not-found>\n                        </md-autocomplete>\n                    </div>\n                    <div flex ng-if="user.type == 2 && !user.id">\n                        <md-autocomplete md-input-name="shippingCenter" md-selected-item="selectedShoppingCenter" md-search-text="data.searchShoppingCenterText" md-selected-item-change="selectShoppingCenter(shoppingCenter)"\n                                         md-items="shoppingCenter in loadShoppingCenters(data.searchShoppingCenterText)" md-item-text="shoppingCenter.name" md-require-match md-delay="300"\n                                         md-min-length="0" md-floating-label="Shopping Center">\n                            <md-item-template>\n                                <span md-highlight-text="data.searchShoppingCenterText">{{shoppingCenter.name}}</span>\n                            </md-item-template>\n                            <md-not-found>\n                                No matching "{{data.searchShoppingCenterText}}" shopping centers were found.\n                            </md-not-found>\n                        </md-autocomplete>\n                    </div>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>First Name</label>\n                        <input ng-model="user.first_name" required type="text">\n                    </md-input-container>\n                    <md-input-container flex>\n                        <label>Last Name</label>\n                        <input ng-model="user.last_name" required type="text">\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Email</label>\n                        <input required ng-model="user.email" type="text" ng-pattern="/^[_a-z0-9]+(\\.[_a-z0-9]+)*@[a-z0-9-]+(\\.[a-z0-9-]+)*(\\.[a-z]{2,4})$/">\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Password</label>\n                        <input ng-required="!user.id" ng-minlength="6" ng-model="user.password" type="password">\n                        <em>* minimum 6 characters long</em>\n                    </md-input-container>\n                </div>\n                <div layout="row">\n                    <md-input-container flex>\n                        <label>Password Confirmation</label>\n                        <input ng-required="!user.id" ng-model="user.password_confirmation" type="password" ng-minlength="6">\n                    </md-input-container>\n                </div>\n                <div layout="row" ng-if="user.type == 3 && user.id == session.user_id">\n                    <md-switch ng-model="user.notifications" ng-true-value="1" ng-false-value="0" aria-label="Email notification">\n                        Email notification: {{ user.notifications ? \'Yes\' : \'No\'}}\n                    </md-switch>\n                </div>\n            </div>\n        </md-content>\n        <section layout="row">\n            \x3c!-- <md-button type="button" class="md-raised" ng-click="cancel()">Back</md-button> --\x3e\n            <md-button type="submit" ng-click="save()" class="md-raised md-primary" ng-disabled="form.$invalid || loading || user.password != user.password_confirmation">\n                <span ng-show="loading">Please wait...</span>\n                <span ng-show="!loading && user.id"><span class="icon-lic-update btn-icon"></span>Update</span>\n                <span ng-show="!loading && !user.id"><span class="icon-lic-save btn-icon"></span> Add</span>\n            </md-button>\n        </section>\n    </form>\n</div>\n\x3c!-- </md-dialog> --\x3e'),t.put("/app/sections/users/users.html",'<div>\n    <div layout="column">\n        <span class="table-title padding-bottom">\n            \x3c!-- <i class="fa fa-database" aria-hidden="true"></i> --\x3e\n             Users</span>\n        <form novalidate flex layout="row" ng-submit="search()">\n            <md-input-container>\n                <label>User type</label>\n                <md-select ng-model="params.type" ng-change="filterRoleChanges()">\n                    <md-option ng-repeat="userRole in userRoles" ng-value="userRole.id">\n                        {{userRole.name}}\n                    </md-option>\n                </md-select>\n            </md-input-container>\n            <md-input-container flex>\n                <label>Search</label>\n                <input type="text" autocomplete="off" ng-disabled="!total && !params.search" ng-model="params.search" ng-change="search()">\n            </md-input-container>\n            \x3c!-- <md-button class="md-fab md-mini" type="submit" ng-disabled="!total && !params.search" aria-label="Search">\n                <i class="fa fa-search"></i>\n            </md-button> --\x3e\n            <md-input-container class="no">\n                <md-button class="md-raised md-primary" type="button" ng-click="openUserEdit($event)" aria-label="Add">\n                    <span class="icon-lic-add btn-icon"></span>Add New User\n                </md-button>\n            </md-input-container>\n        </form>\n        <h4 ng-show="loading" class="text-center">Please wait...</h4>\n        <md-table-container ng-if="total > 0 && !loading" class="user-table">\n            <table md-table md-progress="promise">\n                <thead md-head md-order="params.sort_by" md-on-reorder="sortUsers">\n                    <tr md-row>\n                        <th md-column md-order-by="id">\n                            <span>No.</span>\n                            <i class="fa fa-sort" aria-hidden="true">\n                                <md-tooltip md-direction="bottom">Sort by No.</md-tooltip>\n                            </i>\n                        </th>\n                        <th md-column md-order-by="first_name">\n                            <span>First name</span>\n                            <i class="fa fa-sort" aria-hidden="true">\n                                <md-tooltip md-direction="bottom">Sort by First name</md-tooltip>\n                            </i>\n                        </th>\n                        <th md-column md-order-by="last_name">\n                            <span>Last name</span>\n                            <i class="fa fa-sort" aria-hidden="true">\n                                <md-tooltip md-direction="bottom">Sort by Last name</md-tooltip>\n                            </i>\n                        </th>\n\t\t\t\t\t\t\t\t\t\t\t\t<th md-column md-order-by="email">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>Email</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-sort" aria-hidden="true">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<md-tooltip md-direction="bottom">Sort by Email</md-tooltip>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t\t\t\t</th>\n                        <th md-column md-order-by="type">\n                            <span>User type</span>\n                            <i class="fa fa-sort" aria-hidden="true">\n                                <md-tooltip md-direction="bottom">Sort by User type</md-tooltip>\n                            </i>\n                        </th>\n                        <th md-column>Active</th>\n                    </tr>\n                </thead>\n                <tbody md-body>\n                    <tr md-row ng-repeat="user in users track by $index">\n                        <td md-cell ng-bind="user.id"></td>\n                        <td md-cell ng-bind="user.first_name ? user.first_name : \'-\'"></td>\n                        <td md-cell ng-bind="user.last_name ? user.last_name : \'-\'"></td>\n                        <td md-cell ng-bind="user.email"></td>\n                        <td md-cell ng-bind="userRolesObject[user.type]"></td>\n                        <td md-cell width="10%">\n                            <md-switch nomrg nopadd ng-change="toggleActive(user)" ng-model="user.active" ng-true-value="1" ng-false-value="0" aria-label="Active"></md-switch>\n                        </td>\n                        <td md-cell text-right>\n                            <md-menu md-position-mode="target-right target">\n                                <md-button aria-label="Open demo menu" ng-click="$mdOpenMenu($event)">\n                                    Options <i class="fa fa-caret-down" aria-hidden="true"></i>\n                                </md-button>\n                                <md-menu-content width="4">\n                                    <md-menu-item>\n                                        <md-button ng-click="openUserEdit(user)">\n                                            <div layout="row" flex>\n                                                <span>Edit</span>\n                                            </div>\n                                        </md-button>\n                                    </md-menu-item>\n                                    <md-menu-item>\n                                        <md-button ng-click="openPasswordChange(user)">\n                                            <div layout="row" flex>\n                                                <span>Change password</span>\n                                            </div>\n                                        </md-button>\n                                    </md-menu-item>\n                                    <md-menu-item>\n                                        <md-button ng-click="deleteUser($event, user)">\n                                            <div layout="row" flex>\n                                                <span flex>Delete</span>\n                                            </div>\n                                        </md-button>\n                                    </md-menu-item>\n                                </md-menu-content>\n                            </md-menu>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </md-table-container>\n        <h4 ng-show="!loading && !total && !params.search" class="text-center">Currently there are no users in your database.</h4>\n        <md-table-pagination ng-if="total > 0 && !loading" md-options="[10, 20, 30]" md-limit="params.limit" md-page="params.page"\n            md-total="{{total}}" md-on-paginate="onPaginate" md-page-select></md-table-pagination>\n    </div>\n</div>')}]);